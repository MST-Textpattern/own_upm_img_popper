# own_upm_img_popper v4.6.2.20161226
# More powerful image display
# Dmitry Shovchko
# http://github.com/dshovchko

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YToxMDp7czo3OiJ2ZXJzaW9uIjtzOjE0OiI0LjYuMi4yMDE2MTIyNiI7czo2OiJhdXRob3Ii
O3M6MTU6IkRtaXRyeSBTaG92Y2hrbyI7czoxMDoiYXV0aG9yX3VyaSI7czoyNzoiaHR0cDov
L2dpdGh1Yi5jb20vZHNob3ZjaGtvIjtzOjExOiJkZXNjcmlwdGlvbiI7czoyNzoiTW9yZSBw
b3dlcmZ1bCBpbWFnZSBkaXNwbGF5IjtzOjQ6InR5cGUiO2k6NDtzOjU6ImZsYWdzIjtzOjE6
IjAiO3M6NDoibmFtZSI7czoxODoib3duX3VwbV9pbWdfcG9wcGVyIjtzOjQ6ImhlbHAiO3M6
MDoiIjtzOjQ6ImNvZGUiO3M6MzM4NTU6IgppZiAodHhwaW50ZXJmYWNlID09ICdhZG1pbicp
Cgl7CgkJdXBtX2ltZ19wb3BwZXJfaW5zdGFsbCgpOwoKCQlhZGRfcHJpdnMoJ3VwbV9pbWdf
cG9wcGVyJywgJzEsMiwzLDQsNScpOwoJCXJlZ2lzdGVyX2NhbGxiYWNrKCd1cG1faW1nX3Bv
cHBlcicsICd1cG1faW1nX3BvcHBlcicpOwoKCQlhZGRfcHJpdnMoJ3VwbV9pbWdfcG9wcGVy
X2xpbmsnLCAnMSwyLDMsNCw1Jyk7CgkJcmVnaXN0ZXJfY2FsbGJhY2soJ3VwbV9pbWdfcG9w
cGVyX2xpbmsnLCAnYXJ0aWNsZScpOwoKCQlhZGRfcHJpdnMoJ3VwbV9pbWdfcG9wcGVyX2pz
JywgJzEsMiwzLDQsNScpOwoJCXJlZ2lzdGVyX2NhbGxiYWNrKCd1cG1faW1nX3BvcHBlcl9q
cycsICd1cG1faW1nX3BvcHBlcl9qcycsICcnLCAxKTsKCgkJYWRkX3ByaXZzKCd1cG1faW1n
X3BvcHBlcl9wcmVmcycsICcxLDInKTsKCQlyZWdpc3Rlcl90YWIoJ2V4dGVuc2lvbnMnLCAn
dXBtX2ltZ19wb3BwZXJfcHJlZnMnLCAndXBtX2ltZ19wb3BwZXInKTsKCQlyZWdpc3Rlcl9j
YWxsYmFjaygndXBtX2ltZ19wb3BwZXJfcHJlZnMnLCAndXBtX2ltZ19wb3BwZXJfcHJlZnMn
KTsKCX0KCi8vIC0tLQoKCWZ1bmN0aW9uIHVwbV9pbWdfcG9wcGVyKCkKCXsKCQlnbG9iYWwg
JHN0ZXA7CgoJCWlmICgkc3RlcCA9PSAndXBtX2ltZ19wb3BwZXJfY2hhbmdlX3BhZ2VieScp
CgkJewoJCQlldmVudF9jaGFuZ2VfcGFnZWJ5KCdpbWFnZScpOwoJCQkkR0xPQkFMU1sncHJl
ZnMnXSA9IGdldF9wcmVmcygpOwoJCX0KCgkJdXBtX2ltZ19wb3BwZXJfbGlzdCgpOwoJfQoK
Ly8gLS0tCgoJZnVuY3Rpb24gdXBtX2ltZ19wb3BwZXJfbGlzdCgkbWVzc2FnZSA9ICcnKQoJ
ewoJCWdsb2JhbCAkcHJlZnM7CgoJCXBhZ2V0b3AodXBtX2ltZ19wb3BwZXJfZ1R4dCgnaW1h
Z2Vfc2VsZWN0b3InKSwgJG1lc3NhZ2UpOwoKCQkkcGF0aF90b19zaXRlID0gJHByZWZzWydw
YXRoX3RvX3NpdGUnXTsKCQkkaW1nX2RpciA9ICRwcmVmc1snaW1nX2RpciddOwoKCQlpZiAo
IWRlZmluZWQoJ0lNUEFUSCcpKQoJCXsKCQkJZGVmaW5lKCdJTVBBVEgnLCAkcGF0aF90b19z
aXRlLicvJy4kaW1nX2Rpci4nLycpOwoJCX0KCgkJZWNobyA8PDxjc3MKPHN0eWxlIHR5cGU9
InRleHQvY3NzIj4KPCEtLQpsYWJlbHtjb2xvcjojMDAwO2N1cnNvcjpwb2ludGVyO30KdWx7
bWFyZ2luOjA7cGFkZGluZzowO2xpc3Qtc3R5bGU6bm9uZTt9Cmxpe21hcmdpbjowIDAgMnB4
IDA7cGFkZGluZzowO30KcHttYXJnaW46NXB4IDA7cGFkZGluZzowO30KLnJpZ2h0e3RleHQt
YWxpZ246cmlnaHQ7fQouY2VudGVye21hcmdpbjowIGF1dG87dGV4dC1hbGlnbjpjZW50ZXI7
fQojbm97bWFyZ2luLWxlZnQ6MmVtO30KI3JldHVybiwjc3VjY2VzcywjZmFpbGVke3BhZGRp
bmc6MWVtO3RleHQtYWxpZ246Y2VudGVyO2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3JkZXI6
NXB4IHNvbGlkICNmYzM7fQotLT4KPC9zdHlsZT4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFz
Y3JpcHQiIHNyYz0iaW5kZXgucGhwP2V2ZW50PXVwbV9pbWdfcG9wcGVyX2pzJiMzODtuYW1l
PXBvcCI+PC9zY3JpcHQ+CmNzczsKCgkJZXh0cmFjdChncHNhKGFycmF5KCdwYWdlJywgJ3Nv
cnQnLCAnZGlyJywgJ2NyaXQnLCAnc2VhcmNoX21ldGhvZCcpKSk7CgoJCSRkaXIgPSAoJGRp
ciA9PSAnZGVzYycpID8gJ2Rlc2MnIDogJ2FzYyc7CgoJCXN3aXRjaCAoJHNvcnQpCgkJewoJ
CQljYXNlICdpZCc6CgkJCQkkc29ydF9zcWwgPSAiaWQgJGRpciI7CgkJCWJyZWFrOwoKCQkJ
Y2FzZSAnbmFtZSc6CgkJCQkkc29ydF9zcWwgPSAibmFtZSAkZGlyIjsKCQkJYnJlYWs7CgoJ
CQljYXNlICd0aHVtYm5haWwnOgoJCQkJJHNvcnRfc3FsID0gInRodW1ibmFpbCAkZGlyLCBp
ZCBhc2MiOwoJCQlicmVhazsKCgkJCWNhc2UgJ2NhdGVnb3J5JzoKCQkJCSRzb3J0X3NxbCA9
ICJjYXRlZ29yeSAkZGlyLCBpZCBhc2MiOwoJCQlicmVhazsKCgkJCWNhc2UgJ2RhdGUnOgoJ
CQkJJHNvcnRfc3FsID0gImRhdGUgJGRpciwgaWQgYXNjIjsKCQkJYnJlYWs7CgoJCQljYXNl
ICdhdXRob3InOgoJCQkJJHNvcnRfc3FsID0gImF1dGhvciAkZGlyLCBpZCBhc2MiOwoJCQli
cmVhazsKCgkJCWRlZmF1bHQ6CgkJCQkkZGlyID0gJ2Rlc2MnOwoJCQkJJHNvcnRfc3FsID0g
ImlkICRkaXIiOwoJCQlicmVhazsKCQl9CgoJCSRzd2l0Y2hfZGlyID0gKCRkaXIgPT0gJ2Rl
c2MnKSA/ICdhc2MnIDogJ2Rlc2MnOwoKCQkkY3JpdGVyaWEgPSAxOwoKCQlpZiAoJHNlYXJj
aF9tZXRob2QgYW5kICRjcml0KQoJCXsKCQkJJGNyaXRfZXNjYXBlZCA9IGRvU2xhc2goJGNy
aXQpOwoKCQkJJGNyaXRzcWwgPSBhcnJheSgKCQkJCSdpZCcJCT0+ICJpZCA9ICckY3JpdF9l
c2NhcGVkJyIsCgkJCQknbmFtZScJCT0+ICJuYW1lIGxpa2UgJyUkY3JpdF9lc2NhcGVkJSci
LAoJCQkJJ2NhdGVnb3J5Jwk9PiAiY2F0ZWdvcnkgbGlrZSAnJSRjcml0X2VzY2FwZWQlJyIs
CgkJCQknYXV0aG9yJwk9PiAiYXV0aG9yIGxpa2UgJyUkY3JpdF9lc2NhcGVkJSciLAoJCQkJ
J2FsdCcJCT0+ICJhbHQgbGlrZSAnJSRjcml0X2VzY2FwZWQlJyIsCgkJCQknY2FwdGlvbicJ
PT4gImNhcHRpb24gbGlrZSAnJSRjcml0X2VzY2FwZWQlJyIKCQkJKTsKCgkJCWlmIChhcnJh
eV9rZXlfZXhpc3RzKCRzZWFyY2hfbWV0aG9kLCAkY3JpdHNxbCkpCgkJCXsKCQkJCSRjcml0
ZXJpYSA9ICRjcml0c3FsWyRzZWFyY2hfbWV0aG9kXTsKCQkJCSRsaW1pdCA9IDUwMDsKCQkJ
fQoKCQkJZWxzZQoJCQl7CgkJCQkkc2VhcmNoX21ldGhvZCA9ICcnOwoJCQkJJGNyaXQgPSAn
JzsKCQkJfQoJCX0KCgkJZWxzZQoJCXsKCQkJJHNlYXJjaF9tZXRob2QgPSAnJzsKCQkJJGNy
aXQgPSAnJzsKCQl9CgoJCSR0b3RhbCA9IHNhZmVfY291bnQoJ3R4cF9pbWFnZScsICIkY3Jp
dGVyaWEiKTsKCgkJaWYgKCR0b3RhbCA8IDEpCgkJewoJCQlpZiAoJGNyaXRlcmlhICE9IDEp
CgkJCXsKCQkJCWVjaG8gbi51cG1faW1nX3BvcHBlcl9zZWFyY2hfZm9ybSgkY3JpdCwgJHNl
YXJjaF9tZXRob2QsICRzb3J0LCAkZGlyKS4KCQkJCQluLmdyYWYoZ1R4dCgnbm9fcmVzdWx0
c19mb3VuZCcpLCAnIHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IicpOwoJCQl9CgoJCQll
bHNlCgkJCXsKCQkJCWVjaG8gbi5ncmFmKGdUeHQoJ25vX2ltYWdlc19yZWNvcmRlZCcpLCAn
IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IicpOwoJCQl9CgoJCQlyZXR1cm47CgkJfQoK
CQllY2hvIHVwbV9pbWdfcG9wcGVyX29wdGlvbnNfZm9ybSgpOwoKCQkkbGltaXQgPSBtYXgo
JHByZWZzWydpbWFnZV9saXN0X3BhZ2VieSddLCAxNSk7CgoJCWxpc3QoJHBhZ2UsICRvZmZz
ZXQsICRudW1QYWdlcykgPSBwYWdlcigkdG90YWwsICRsaW1pdCwgJHBhZ2UpOwoKCQllY2hv
IHVwbV9pbWdfcG9wcGVyX3NlYXJjaF9mb3JtKCRjcml0LCAkc2VhcmNoX21ldGhvZCwgJHNv
cnQsICRkaXIpOwoKCQkkcnMgPSBzYWZlX3Jvd3Nfc3RhcnQoJyosIHVuaXhfdGltZXN0YW1w
KGRhdGUpIGFzIHVEYXRlJywgJ3R4cF9pbWFnZScsCgkJCSIkY3JpdGVyaWEgb3JkZXIgYnkg
JHNvcnRfc3FsIGxpbWl0ICRvZmZzZXQsICRsaW1pdAoJCSIpOwoKCQlpZiAoJHJzKQoJCXsK
CQkJJHNvcnRfbGluayA9ICd1cG1faW1nX3BvcHBlcicuYS4nYm09dHJ1ZSc7CgoJCQllY2hv
IG4ubi5zdGFydFRhYmxlKCdsaXN0JykuCgkJCQluLnRyKAoJCQkJCWNvbHVtbl9oZWFkKCdJ
RCcsICdpZCcsICRzb3J0X2xpbmssIHRydWUsICRzd2l0Y2hfZGlyLCAkY3JpdCwgJHNlYXJj
aF9tZXRob2QpLgoJCQkJCWNvbHVtbl9oZWFkKCduYW1lJywgJ25hbWUnLCAkc29ydF9saW5r
LCB0cnVlLCAkc3dpdGNoX2RpciwgJGNyaXQsICRzZWFyY2hfbWV0aG9kKS4KCQkJCQljb2x1
bW5faGVhZCgndGh1bWJuYWlsJywgJ3RodW1ibmFpbCcsICRzb3J0X2xpbmssIHRydWUsICRz
d2l0Y2hfZGlyLCAkY3JpdCwgJHNlYXJjaF9tZXRob2QpLgoJCQkJCWhDZWxsKGdUeHQoJ3By
ZXZpZXcnKSkuCgkJCQkJY29sdW1uX2hlYWQoJ2F1dGhvcicsICdhdXRob3InLCAkc29ydF9s
aW5rLCB0cnVlLCAkc3dpdGNoX2RpciwgJGNyaXQsICRzZWFyY2hfbWV0aG9kKS4KCQkJCQlo
Q2VsbCh1cG1faW1nX3BvcHBlcl9nVHh0KCdpbnNlcnQnKSkuCgkJCQkJKCBmdW5jdGlvbl9l
eGlzdHMoJ3VwbV9pbWFnZScpID8gaENlbGwodXBtX2ltZ19wb3BwZXJfZ1R4dCgnaW5zZXJ0
X3BsdWdpbicpKSA6ICcnICkuCgkJCQkJaENlbGwoKQoJCQkJKTsKCgkJCXdoaWxlICgkYSA9
IG5leHRSb3coJHJzKSkKCQkJewoJCQkJZXh0cmFjdCgkYSk7CgoJCQkJJGVkaXRfdXJsID0g
Jz9ldmVudD1pbWFnZScuYS4nc3RlcD1pbWFnZV9lZGl0Jy5hLidpZD0nLiRpZC5hLidzb3J0
PScuJHNvcnQuCgkJCQkJYS4nZGlyPScuJGRpci5hLidwYWdlPScuJHBhZ2UuYS4nc2VhcmNo
X21ldGhvZD0nLiRzZWFyY2hfbWV0aG9kLmEuJ2NyaXQ9Jy4kY3JpdDsKCgkJCQkkbmFtZSA9
IGVtcHR5KCRuYW1lKSA/IGdUeHQoJ3VubmFtZWQnKSA6ICRuYW1lOwoKCQkJCSR0aHVtYm5h
aWwgPSAoJHRodW1ibmFpbCkgPwoJCQkJCSc8aW1nIHNyYz0iJy5odS4kaW1nX2Rpci4nLycu
JGlkLid0Jy4kZXh0LiciIC8+JyA6CgkJCQkJZ1R4dCgnbm8nKTsKCgkJCQkvLyBnb2QgSSBo
YXRlIGphdmFzY3JpcHQgaW4gcGhwCgoJCQkJJGlkcyA9IG4uJzx1bD4nLm4uCgkJCQkJbi50
Lic8bGk+Jy4kaWQuJzwvbGk+Jy4KCQkJCQluLnQuJzxsaT48YSBocmVmPSInLiRlZGl0X3Vy
bC4nIiBvbmNsaWNrPSJ3YXJuRWRpdEltYWdlKCcuJGlkLicpOyByZXR1cm4gZmFsc2U7Ij4n
LmdUeHQoJ2VkaXQnKS4nPC9hPjwvbGk+Jy4KCQkJCQluLnQuJzxsaT4nLnNhZmVfc3RyZnRp
bWUoJyVkICViICVZICVJOiVNICVwJywgJHVEYXRlKS4nPC9saT4nLgoJCQkJCW4uJzwvdWw+
JzsKCgkJCQkkaW5zZXJ0ID0gbi4nPHVsPicubi4KCQkJCQluLnQuJzxsaT48YSBocmVmPSIj
IiBvbmNsaWNrPSJpbnNlcnRUYWcoXCdhcHBlbmQtYXJ0aWNsZS1pbWFnZVwnLCAnLmNocigz
OSkuJGlkLmNocigzOSkuJyk7IHJldHVybiBmYWxzZTsiPicudXBtX2ltZ19wb3BwZXJfZ1R4
dCgnYXJ0aWNsZV9pbWFnZV9hcHBlbmQnKS4nPC9hPjwvbGk+Jy4KCQkJCQluLnQuJzxsaT48
YSBocmVmPSIjIiBvbmNsaWNrPSJpbnNlcnRUYWcoXCdyZXBsYWNlLWFydGljbGUtaW1hZ2Vc
JywgJy5jaHIoMzkpLiRpZC5jaHIoMzkpLicpOyByZXR1cm4gZmFsc2U7Ij4nLnVwbV9pbWdf
cG9wcGVyX2dUeHQoJ2FydGljbGVfaW1hZ2VfcmVwbGFjZScpLic8L2E+PC9saT4nLgoJCQkJ
CW4udC4nPGxpPjxhIGhyZWY9IiMiIG9uY2xpY2s9Imluc2VydFRhZyhcJ2ltYWdlXCcsICcu
Y2hyKDM5KS4kaWQuY2hyKDM5KS4nKTsgcmV0dXJuIGZhbHNlOyI+Jy51cG1faW1nX3BvcHBl
cl9nVHh0KCdpbWFnZScpLic8L2E+PC9saT4nOwoKCQkJCSRwbHVnaW4gPSBuLic8dWw+Jy5u
LgoJCQkJCW4udC4nPGxpPjxhIGhyZWY9IiMiIG9uY2xpY2s9Imluc2VydFRhZyhcJ3BsdWdp
bi1pbWFnZVwnLCAnLmNocigzOSkuJGlkLmNocigzOSkuJyk7IHJldHVybiBmYWxzZTsiPicu
dXBtX2ltZ19wb3BwZXJfZ1R4dCgnaW1hZ2UnKS4nPC9hPjwvbGk+JzsKCgkJCQlpZiAoJHRo
dW1ibmFpbCkKCQkJCXsKCQkJCQkkaW5zZXJ0IC49IG4udC4nPGxpPjxhIGhyZWY9IiMiIG9u
Y2xpY2s9Imluc2VydFRhZyhcJ3RodW1iXCcsICcuY2hyKDM5KS4kaWQuY2hyKDM5KS4nKTsg
cmV0dXJuIGZhbHNlOyI+Jy5nVHh0KCd0aHVtYm5haWwnKS4nPC9hPjwvbGk+Jy4KCQkJCQkJ
bi50Lic8bGk+PGEgaHJlZj0iIyIgb25jbGljaz0iaW5zZXJ0VGFnKFwncG9wdXBcJywgJy5j
aHIoMzkpLiRpZC5jaHIoMzkpLicpOyByZXR1cm4gZmFsc2U7Ij4nLnVwbV9pbWdfcG9wcGVy
X2dUeHQoJ3BvcHVwJykuJzwvYT48L2xpPic7CgoJCQkJCSRwbHVnaW4gLj0gbi50Lic8bGk+
PGEgaHJlZj0iIyIgb25jbGljaz0iaW5zZXJ0VGFnKFwncGx1Z2luLXRodW1iXCcsICcuY2hy
KDM5KS4kaWQuY2hyKDM5KS4nKTsgcmV0dXJuIGZhbHNlOyI+Jy5nVHh0KCd0aHVtYm5haWwn
KS4nPC9hPjwvbGk+Jy4KCQkJCQkJbi50Lic8bGk+PGEgaHJlZj0iIyIgb25jbGljaz0iaW5z
ZXJ0VGFnKFwncGx1Z2luLXBvcHVwXCcsICcuY2hyKDM5KS4kaWQuY2hyKDM5KS4nKTsgcmV0
dXJuIGZhbHNlOyI+Jy51cG1faW1nX3BvcHBlcl9nVHh0KCdwb3B1cCcpLic8L2E+PC9saT4n
OwoJCQkJfQoKCQkJCSRpbnNlcnQgLj0gbi50Lic8bGk+PGEgaHJlZj0iIyIgb25jbGljaz0i
aW5zZXJ0VGFnKFwndGV4dGlsZVwnLCAnLmNocigzOSkuJGlkLmNocigzOSkuJywgJy5jaHIo
MzkpLiRleHQuY2hyKDM5KS4nLCBcJ1wnLCBcJ1wnLCAnLmNocigzOSkuaHRtbHNwZWNpYWxj
aGFycygkYWx0KS5jaHIoMzkpLicpOyByZXR1cm4gZmFsc2U7Ij5UZXh0aWxlPC9hPjwvbGk+
Jy4KCQkJCQluLnQuJzxsaT48YSBocmVmPSIjIiBvbmNsaWNrPSJpbnNlcnRUYWcoXCd4aHRt
bFwnLCAnLmNocigzOSkuJGlkLmNocigzOSkuJywgJy5jaHIoMzkpLiRleHQuY2hyKDM5KS4n
LCAnLmNocigzOSkuJHcuY2hyKDM5KS4nLCAnLmNocigzOSkuJGguY2hyKDM5KS4nLCAnLmNo
cigzOSkuaHRtbHNwZWNpYWxjaGFycygkYWx0KS5jaHIoMzkpLicsICcuY2hyKDM5KS5odG1s
c3BlY2lhbGNoYXJzKCRjYXB0aW9uKS5jaHIoMzkpLicpOyByZXR1cm4gZmFsc2U7Ij5YSFRN
TDwvYT48L2xpPicuCgkJCQkJbi4nPC91bD4nOwoKCQkJCSRwbHVnaW4gLj0gbi50Lic8bGk+
PGEgaHJlZj0iIyIgb25jbGljaz0iaW5zZXJ0VGFnKFwncGx1Z2luLWN1c3RvbVwnLCAnLmNo
cigzOSkuJGlkLmNocigzOSkuJyk7IHJldHVybiBmYWxzZTsiPicudXBtX2ltZ19wb3BwZXJf
Z1R4dCgnY3VzdG9tX2Zvcm0nKS4nPC9hPjwvbGk+Jy4KCQkJCQluLic8L3VsPic7CgoJCQkJ
JHByZXZpZXcgPSBuLic8dWw+Jy4KCQkJCQluLnQuJzxsaT48YSBocmVmPSIjIiBvbmNsaWNr
PSJtYWtlV2luKCcuY2hyKDM5KS4nJiM4MjIwOycuJG5hbWUuJyYjODIyMTsnLmNocigzOSku
JywgJy5jaHIoMzkpLicmIzYwO2ltZyBzcmM9JiMzNDsnLmh1LiRpbWdfZGlyLicvJy4kaWQu
JGV4dC4nJiMzNDsgLyYjNjI7Jy5jaHIoMzkpLicsICcuJHcuJywgJy4kaC4nKTsgcmV0dXJu
IGZhbHNlOyI+Jy51cG1faW1nX3BvcHBlcl9nVHh0KCdpbWFnZScpLic8L2E+PC9saT4nOwoK
CQkJCWlmICghZW1wdHkoJGFsdCkpCgkJCQl7CgkJCQkJJHByZXZpZXcgLj0gbi50Lic8bGk+
PGEgaHJlZj0iIyIgb25jbGljaz0ibWFrZVdpbignLmNocigzOSkudXBtX2ltZ19wb3BwZXJf
Z1R4dCgnYWx0X3RleHRfZm9yJykuJyAmIzgyMjA7Jy4kbmFtZS4nJiM4MjIxOycuY2hyKDM5
KS4nLCAnLmNocigzOSkuaHRtbHNwZWNpYWxjaGFycygkYWx0KS5jaHIoMzkpLicpOyByZXR1
cm4gZmFsc2U7Ij4nLmdUeHQoJ2FsdF90ZXh0JykuJzwvYT48L2xpPic7CgkJCQl9CgoJCQkJ
aWYgKCFlbXB0eSgkY2FwdGlvbikpCgkJCQl7CgkJCQkJJHByZXZpZXcgLj0gbi50Lic8bGk+
PGEgaHJlZj0iIyIgb25jbGljaz0ibWFrZVdpbignLmNocigzOSkudXBtX2ltZ19wb3BwZXJf
Z1R4dCgnY2FwdGlvbl9mb3InKS4nICYjODIyMDsnLiRuYW1lLicmIzgyMjE7Jy5jaHIoMzkp
LicsICcuY2hyKDM5KS5odG1sc3BlY2lhbGNoYXJzKCRjYXB0aW9uKS5jaHIoMzkpLicpOyBy
ZXR1cm4gZmFsc2U7Ij4nLmdUeHQoJ2NhcHRpb24nKS4nPC9hPjwvbGk+JzsKCQkJCX0KCgkJ
CQkkcHJldmlldyAuPSBuLic8L3VsPic7CgoJCQkJJGNhdGVnb3J5ID0gKCRjYXRlZ29yeSkg
PyAnPHNwYW4gdGl0bGU9IicuZmV0Y2hfY2F0ZWdvcnlfdGl0bGUoJGNhdGVnb3J5LCAnaW1h
Z2UnKS4nIj4nLiRjYXRlZ29yeS4nPC9zcGFuPicgOiAnJzsKCgkJCQllY2hvIG4ubi50cigK
CQkJCQluLnRkKCRpZHMsIDEyNSkuCgoJCQkJCXRkKCc8YSBocmVmPSInLiRlZGl0X3VybC4n
IiBvbmNsaWNrPSJ3YXJuRWRpdEltYWdlKCcuJGlkLicpOyByZXR1cm4gZmFsc2U7Ij4nLiRu
YW1lLic8L2E+JwoJCQkJCSwgNzUpLgoKCQkJCQl0ZCgkdGh1bWJuYWlsLCAxOTUpLgoKCQkJ
CQl0ZCgkcHJldmlldykuCgoJCQkJCXRkKAoJCQkJCQknPHNwYW4gdGl0bGU9IicuZ2V0X2F1
dGhvcl9uYW1lKCRhdXRob3IpLiciPicuJGF1dGhvci4nPC9zcGFuPicKCQkJCQksIDc1KS4K
CgkJCQkJdGQoJGluc2VydCwgMTUwKS4KCQkJCQkoIGZ1bmN0aW9uX2V4aXN0cygndXBtX2lt
YWdlJykgPyBuLnRkKCRwbHVnaW4pIDogJycgKS4KCgkJCQkJdGQoCgkJCQkJCWRMaW5rKCdp
bWFnZScsICdpbWFnZV9kZWxldGUnLCAnaWQnLCAkaWQpCgkJCQkJLCAxMCkKCQkJCSk7CgkJ
CX0KCgkJCWVjaG8gZW5kVGFibGUoKS4KCgkJCQluYXZfZm9ybV91cG0oJ3VwbV9pbWdfcG9w
cGVyJywnMScsICRwYWdlLCAkbnVtUGFnZXMsICRzb3J0LCAkZGlyLCAkY3JpdCwgJHNlYXJj
aF9tZXRob2QpLgoKCQkJCXVwbV9pbWdfcG9wcGVyX3BhZ2VieV9mb3JtKCkuCgoJCQkJbi50
YWcoCgkJCQkJbi5ncmFmKHVwbV9pbWdfcG9wcGVyX2dUeHQoJ3JldHVybicpKS4KCQkJCQlu
LmdyYWYoJzxhIGlkPSJ5ZXMiIGhyZWY9IiMiIG9uY2xpY2s9ImdvQmFjayh0aGlzLmhyZWYp
OyByZXR1cm4gZmFsc2U7Ij4nLmdUeHQoJ3llcycpLic8L2E+LicuCgkJCQkJCScgPGEgaWQ9
Im5vIiBocmVmPSIjIiBvbmNsaWNrPSJkb25lKFwncmV0dXJuXCcpOyByZXR1cm4gZmFsc2U7
Ij4nLmdUeHQoJ25vJykuJzwvYT4uJykKCQkJCSwgJ2RpdicsCScgaWQ9InJldHVybiIgc3R5
bGU9ImRpc3BsYXk6IG5vbmU7IHdpZHRoOiAyMDBweDsgaGVpZ2h0OiA3NXB4OyInKS4KCgkJ
CQluLmdyYWYodXBtX2ltZ19wb3BwZXJfZ1R4dCgnc3VjY2VzcycpLCAnIGlkPSJzdWNjZXNz
IiBzdHlsZT0iZGlzcGxheTogbm9uZTsgd2lkdGg6IDE1MHB4OyBoZWlnaHQ6IDM1cHg7Iicp
LgoJCQkJbi5ncmFmKHVwbV9pbWdfcG9wcGVyX2dUeHQoJ2ZhaWxlZCcpLCAnIGlkPSJmYWls
ZWQiIHN0eWxlPSJkaXNwbGF5OiBub25lOyB3aWR0aDogMTUwcHg7IGhlaWdodDogMzVweDsi
Jyk7CgkJfQoJfQoKLy8gLS0tCgoJZnVuY3Rpb24gdXBtX2ltZ19wb3BwZXJfb3B0aW9uc19m
b3JtKCkKCXsKCQlnbG9iYWwgJHByZWZzOwoKCQllY2hvIG4uJzxmb3JtIGFjdGlvbj0iIiBz
dHlsZT0ibWFyZ2luLWJvdHRvbTogMTVweDsnLiggISRwcmVmc1sndXBtX2ltZ19wb3BwZXJf
c2hvd19mb3JtJ10gPyAnIGRpc3BsYXk6IG5vbmU7JyA6ICcnKS4nIj4nLgoJCQlncmFmKAoJ
CQkJbi4nPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iaW5jX3dpZHRoIicuKCgkcHJlZnNb
J3VwbV9pbWdfcG9wcGVyX3Nob3dfd2lkdGgnXSA9PSAnMScpID8gJyBjaGVja2VkPSJjaGVj
a2VkIicgOiAnJykuJyAvPiA8bGFiZWwgZm9yPSJpbmNfd2lkdGgiPicudXBtX2ltZ19wb3Bw
ZXJfZ1R4dCgnaW5jbHVkZV93aWR0aCcpLic8L2xhYmVsPiAnLgoJCQkJbi4nPGlucHV0IHR5
cGU9ImNoZWNrYm94IiBpZD0iaW5jX2hlaWdodCInLigoJHByZWZzWyd1cG1faW1nX3BvcHBl
cl9zaG93X2hlaWdodCddID09ICcxJykgPyAnIGNoZWNrZWQ9ImNoZWNrZWQiJyA6ICcnKS4n
IC8+IDxsYWJlbCBmb3I9ImluY19oZWlnaHQiPicudXBtX2ltZ19wb3BwZXJfZ1R4dCgnaW5j
bHVkZV9oZWlnaHQnKS4nPC9sYWJlbD4gJy4KCQkJCW4uJzxpbnB1dCB0eXBlPSJjaGVja2Jv
eCIgaWQ9ImluY19hbHQiJy4oKCRwcmVmc1sndXBtX2ltZ19wb3BwZXJfc2hvd19hbHQnXSA9
PSAnMScpID8gJyBjaGVja2VkPSJjaGVja2VkIicgOiAnJykuJyAvPiA8bGFiZWwgZm9yPSJp
bmNfYWx0Ij4nLnVwbV9pbWdfcG9wcGVyX2dUeHQoJ2luY2x1ZGVfYWx0JykuJzwvbGFiZWw+
ICcuCgkJCQluLic8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJpbmNfdGl0bGUiJy4oKCRw
cmVmc1sndXBtX2ltZ19wb3BwZXJfc2hvd190aXRsZSddID09ICcxJykgPyAnIGNoZWNrZWQ9
ImNoZWNrZWQiJyA6ICcnKS4nIC8+IDxsYWJlbCBmb3I9ImluY190aXRsZSI+Jy51cG1faW1n
X3BvcHBlcl9nVHh0KCdpbmNsdWRlX2NhcHRpb24nKS4nPC9sYWJlbD4nLmJyLgoJCQkJbi4n
PGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iaW5jX2NsYXNzIicuKCgkcHJlZnNbJ3VwbV9p
bWdfcG9wcGVyX3Nob3dfY2xhc3MnXSA9PSAnMScpID8gJyBjaGVja2VkPSJjaGVja2VkIicg
OiAnJykuJyAvPiA8bGFiZWwgZm9yPSJpbmNfY2xhc3MiPicudXBtX2ltZ19wb3BwZXJfZ1R4
dCgnYXNzaWduX2NsYXNzJykuJzwvbGFiZWw+ICcuCgkJCQluLic8aW5wdXQgdHlwZT0idGV4
dCIgaWQ9InRoZV9jbGFzcyIgdmFsdWU9IicuJHByZWZzWyd1cG1faW1nX3BvcHBlcl90aGVf
Y2xhc3MnXS4nIiBjbGFzcz0iZWRpdCIgLz4nCgkJCSwgJyBzdHlsZT0idGV4dC1hbGlnbjog
Y2VudGVyOyInKS4KCgkJCW4uZ3JhZigKCQkJCSc8bGFiZWwgZm9yPSJjdXN0b21fZm9ybSI+
Jy51cG1faW1nX3BvcHBlcl9nVHh0KCdjdXN0b21fZm9ybScpLic8L2xhYmVsPiA8aW5wdXQg
dHlwZT0idGV4dCIgaWQ9ImN1c3RvbV9mb3JtIiB2YWx1ZT0iJy4kcHJlZnNbJ3VwbV9pbWdf
cG9wcGVyX2N1c3RvbV9mb3JtJ10uJyIgY2xhc3M9ImVkaXQiIC8+ICgnLnVwbV9pbWdfcG9w
cGVyX2dUeHQoJ292ZXJyaWRlJykuJyknCgkJCSwgJyBzdHlsZT0idGV4dC1hbGlnbjogY2Vu
dGVyOyInKS4KCgkJbi4nPC9mb3JtPic7Cgl9CgovLyAtLS0KCglmdW5jdGlvbiB1cG1faW1n
X3BvcHBlcl9zZWFyY2hfZm9ybSgkY3JpdCwgJG1ldGhvZCwgJHNvcnQsICRkaXIpCgl7CgkJ
JGRlZmF1bHRfbWV0aG9kID0gJ25hbWUnOwoKCQkkbWV0aG9kID0gKCRtZXRob2QpID8gJG1l
dGhvZCA6ICRkZWZhdWx0X21ldGhvZDsKCgkJJG1ldGhvZHMgPQlhcnJheSgKCQkJJ2lkJwkJ
CSA9PiBnVHh0KCdJRCcpLAoJCQknbmFtZScJCSA9PiBnVHh0KCduYW1lJyksCgkJCSdjYXRl
Z29yeScgPT4gZ1R4dCgnaW1hZ2VfY2F0ZWdvcnknKSwKCQkJJ2F1dGhvcicJID0+IGdUeHQo
J2F1dGhvcicpLAoJCQknYWx0JwkJCSA9PiBnVHh0KCdhbHRfdGV4dCcpLAoJCQknY2FwdGlv
bicJID0+IGdUeHQoJ2NhcHRpb24nKQoJCSk7CgoJCXJldHVybiBuLm4uJzxmb3JtIG1ldGhv
ZD0iZ2V0IiBhY3Rpb249ImluZGV4LnBocCIgc3R5bGU9Im1hcmdpbjogYXV0bzsgdGV4dC1h
bGlnbjogY2VudGVyOyI+Jy4KCQkJbi5ncmFmKAoJCQkJJzxsYWJlbCBmb3I9InVwbS1pbWct
cG9wcGVyLXNlYXJjaCI+Jy5nVHh0KCdzZWFyY2gnKS4nPC9sYWJlbD4nLnNwLgoJCQkJc2Vs
ZWN0SW5wdXQoJ3NlYXJjaF9tZXRob2QnLCAkbWV0aG9kcywgJG1ldGhvZCwgJycsICcnLCAn
dXBtLWltZy1wb3BwZXItc2VhcmNoJykuc3AuCgkJCQlmSW5wdXQoJ3RleHQnLCAnY3JpdCcs
ICRjcml0LCAnZWRpdCcsICcnLCAnJywgJzE1JykuCgkJCQllSW5wdXQoJ3VwbV9pbWdfcG9w
cGVyJykuCgkJCQloSW5wdXQoJ2JtJywnMScpLgoJCQkJZklucHV0KCdzdWJtaXQnLCAnc2Vh
cmNoJywgZ1R4dCgnZ28nKSwgJ3NtYWxsZXJib3gnKQoJCQkpLgoKCQkJKCRjcml0ID8gbi5n
cmFmKCc8YSBocmVmPSI/ZXZlbnQ9dXBtX2ltZ19wb3BwZXInLmEuJ2JtPXRydWUiPicudXBt
X2ltZ19wb3BwZXJfZ1R4dCgndmlld19hbGwnKS4nPC9hPicpIDogJycpLgoKCQluLic8L2Zv
cm0+JzsKCX0KCi8vIC0tLQoKCWZ1bmN0aW9uIHVwbV9pbWdfcG9wcGVyX2xpbmsoKQoJewoJ
CSRhcHBfbW9kZSA9IGdwcygnYXBwX21vZGUnKTsKCQlpZiAoJGFwcF9tb2RlPT09J2FzeW5j
JykgcmV0dXJuOwoKCQkkdmlldyA9IGdwcygndmlldycpOwoKCQlpZiAoJHZpZXcgPT0gJ3Rl
eHQnIG9yIGVtcHR5KCR2aWV3KSkKCQl7CgkJCWVjaG8gPDw8Zm9ybQo8Zm9ybSBhY3Rpb249
IiI+CjxpbnB1dCB0eXBlPSJoaWRkZW4iIGlkPSJ1cG1faW1nX3BvcHBlcl9zdGFydCIgdmFs
dWU9IiI+CjwvZm9ybT4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iaW5k
ZXgucGhwP2V2ZW50PXVwbV9pbWdfcG9wcGVyX2pzJiMzODtuYW1lPWxpbmsiPjwvc2NyaXB0
Pgpmb3JtOwoKCQl9Cgl9CgovLyAtLS0KCglmdW5jdGlvbiB1cG1faW1nX3BvcHBlcl9wYWdl
YnlfZm9ybSgpCgl7CgkJZ2xvYmFsICRwcmVmczsKCgkJJHZhbHMgPSBhcnJheSgKCQkJMTUJ
PT4gMTUsCgkJCTI1CT0+IDI1LAoJCQk1MAk9PiA1MCwKCQkJMTAwID0+IDEwMAoJCSk7CgoJ
CSRzZWxlY3RfcGFnZSA9IHNlbGVjdElucHV0KCdxdHknLCAkdmFscywgJHByZWZzWydpbWFn
ZV9saXN0X3BhZ2VieSddLCAnJywgMSk7CgoJCS8vIHByb3BlciBsb2NhbGlzYXRpb24KCQkk
cGFnZSA9IHN0cl9yZXBsYWNlKCd7cGFnZX0nLCAkc2VsZWN0X3BhZ2UsIGdUeHQoJ3ZpZXdf
cGVyX3BhZ2UnKSk7CgoJCXJldHVybiBmb3JtKAoJCQknPGRpdiBzdHlsZT0ibWFyZ2luOiBh
dXRvOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij4nLgoJCQkJJHBhZ2UuCgkJCQllSW5wdXQoJ3Vw
bV9pbWdfcG9wcGVyJykuCgkJCQlzSW5wdXQoJ3VwbV9pbWdfcG9wcGVyX2NoYW5nZV9wYWdl
YnknKS4KCQkJCWhJbnB1dCgnYm0nLCAnMScpLgoJCQkJJzxub3NjcmlwdD4gPGlucHV0IHR5
cGU9InN1Ym1pdCIgdmFsdWU9IicuZ1R4dCgnZ28nKS4nIiBjbGFzcz0ic21hbGxlcmJveCIg
Lz48L25vc2NyaXB0PicuCgkJCSc8L2Rpdj4nCgkJKTsKCX0KCi8vIC0tLQoKCWZ1bmN0aW9u
IHVwbV9pbWdfcG9wcGVyX2pzKCkKCXsKCQl3aGlsZSAoQG9iX2VuZF9jbGVhbigpKTsKCgkJ
aWYgKGdwcygnbmFtZScpID09ICdsaW5rJykKCQl7CgkJCWdsb2JhbCAkcHJlZnM7CgoJCQkk
dHh0ID0gZ1R4dCgnYWR2YW5jZWRfb3B0aW9ucycpOwoJCQkkbGFuZ19pbnNlcnRfaW1hZ2Ug
PSB1cG1faW1nX3BvcHBlcl9nVHh0KCdpbnNlcnRfaW1hZ2UnKTsKCgkJCWhlYWRlcigiQ29u
dGVudC10eXBlOiB0ZXh0L2phdmFzY3JpcHQiKTsKCgkJCWVjaG8gPDw8anMKCmRvY3VtZW50
LmdldEVsZW1lbnRCeUlkKCd1cG1faW1nX3BvcHBlcl9zdGFydCcpLnZhbHVlID0gZG9jdW1l
bnQuZ2V0RWxlbWVudEJ5SWQoJ2JvZHknKS52YWx1ZTsKCnZhciBjdXJyZW50ID0gJ2JvZHkn
OwoKaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGNlcnB0JykpCnsKCS8vIElFIGlz
IHJldGFyZGVkCglkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9keScpLm9uY2xpY2sgPSBm
dW5jdGlvbiAoKSB7CgkJY3VycmVudCA9ICdib2R5JzsKCX07CgoJZG9jdW1lbnQuZ2V0RWxl
bWVudEJ5SWQoJ2V4Y2VycHQnKS5vbmNsaWNrID0gZnVuY3Rpb24gKCkgewoJCWN1cnJlbnQg
PSAnZXhjZXJwdCc7Cgl9Owp9CgovLyAtLS0KCnZhciB0eHQgPSAnJHR4dCc7Cgp2YXIgYSA9
IChkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMpID8KCWRvY3VtZW50LmNyZWF0ZUVsZW1lbnRO
UygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCcsICdhJykgOgoJZG9jdW1lbnQuY3Jl
YXRlRWxlbWVudCgnYScpOwoKYS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9k
ZSgnJGxhbmdfaW5zZXJ0X2ltYWdlJykpOwoKdmFyIHcgPSB7JHByZWZzWyd1cG1faW1nX3Bv
cHBlcl9hZG1pbl9wb3B1cF93aWR0aCddfTsKdmFyIGggPSB7JHByZWZzWyd1cG1faW1nX3Bv
cHBlcl9hZG1pbl9wb3B1cF9oZWlnaHQnXX07Cgp2YXIgdCA9IChzY3JlZW4uaGVpZ2h0KSA/
IChzY3JlZW4uaGVpZ2h0IC0gaCkgLyAyIDogMDsKdmFyIGwgPSAoc2NyZWVuLndpZHRoKSA/
IChzY3JlZW4ud2lkdGggLSB3KSAvIDIgOiAwOwoKYS5vbmNsaWNrID0gZnVuY3Rpb24gKCkg
ewoJdmFyIHVwbV9pbWdfcG9wcGVyID0gd2luZG93Lm9wZW4odGhpcy5ocmVmLCAndXBtX2lt
Z19wb3BwZXInLCAndG9wID0gJyt0KycsIGxlZnQgPSAnK2wrJywgd2lkdGggPSAnK3crJywg
aGVpZ2h0ID0gJytoKycsIHRvb2xiYXIgPSBubywgbG9jYXRpb24gPSBubywgZGlyZWN0b3Jp
ZXMgPSBubywgc3RhdHVzID0geWVzLCBtZW51YmFyID0gbm8sIHNjcm9sbGJhcnMgPSB5ZXMs
IGNvcHloaXN0b3J5ID0gbm8sIHJlc2l6YWJsZSA9IHllcycpOwoJCXVwbV9pbWdfcG9wcGVy
LmZvY3VzKCk7CgkJcmV0dXJuIGZhbHNlOwp9OwoKYS5zZXRBdHRyaWJ1dGUoJ3RhcmdldCcs
ICdibGFuaycpOwphLnNldEF0dHJpYnV0ZSgnaHJlZicsICc/ZXZlbnQ9dXBtX2ltZ19wb3Bw
ZXJcdTAwMjZibT0xJyk7Cgp2YXIgbGluayA9IChkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMp
ID8KCWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94
aHRtbCcsICdoMycpIDoKCWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7CgpsaW5rLnNl
dEF0dHJpYnV0ZSgnY2xhc3NOYW1lJywgJ3BsYWluJyk7IC8vIHN0dXBpZCBJRQpsaW5rLnNl
dEF0dHJpYnV0ZSgnY2xhc3MnLCAncGxhaW4nKTsKbGluay5hcHBlbmRDaGlsZChhKTsKCi8v
IC0tLQoKdmFyIGgzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoMycpOwoK
Zm9yICh2YXIgaSA9IDA7IGkgPCBoM3MubGVuZ3RoOyBpKyspCnsKCXZhciBoMyA9IGRvY3Vt
ZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoMycpW2ldOwoKCWlmIChoMy5maXJzdENoaWxk
LmZpcnN0Q2hpbGQpCgl7CgkJaWYgKGgzLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZC5ub2RlVmFs
dWUgPT0gdHh0KQoJCXsKCQkJaDMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobGluaywgaDMp
OwoJCX0KCX0KfQoKLy8gLS0tCi8vIHRoYW5rcyBBbGV4ISA8aHR0cDovL3d3dy5hbGV4a2lu
Zy5vcmcvPgoKZnVuY3Rpb24gdXBtX2ltZ19wb3BwZXJfaW5zZXJ0KG15RmllbGQsIG15VmFs
dWUpCnsKCS8vIElFIHN1cHBvcnQKCWlmIChkb2N1bWVudC5zZWxlY3Rpb24pCgl7CgkJbXlG
aWVsZC5mb2N1cygpOwoJCXNlbCA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgp
OwoJCXNlbC50ZXh0ID0gbXlWYWx1ZTsKCQlteUZpZWxkLmZvY3VzKCk7Cgl9CgoJLy8gTW96
aWxsYS9OZXRzY2FwZSBzdXBwb3J0CgllbHNlIGlmIChteUZpZWxkLnNlbGVjdGlvblN0YXJ0
IHx8IG15RmllbGQuc2VsZWN0aW9uU3RhcnQgPT0gJzAnKQoJewoJCXN0YXJ0UG9zID0gbXlG
aWVsZC5zZWxlY3Rpb25TdGFydDsKCQllbmRQb3MgPSBteUZpZWxkLnNlbGVjdGlvbkVuZDsK
CgkJbXlGaWVsZC52YWx1ZSA9IG15RmllbGQudmFsdWUuc3Vic3RyaW5nKDAsIHN0YXJ0UG9z
KSArIG15VmFsdWUgKyBteUZpZWxkLnZhbHVlLnN1YnN0cmluZyhlbmRQb3MsIG15RmllbGQu
dmFsdWUubGVuZ3RoKTsKCgkJbXlGaWVsZC5mb2N1cygpOwoJCW15RmllbGQuc2VsZWN0aW9u
U3RhcnQgPSBzdGFydFBvcyArIG15VmFsdWUubGVuZ3RoOwoJCW15RmllbGQuc2VsZWN0aW9u
RW5kID0gc3RhcnRQb3MgKyBteVZhbHVlLmxlbmd0aDsKCX0KCgllbHNlCgl7CgkJbXlGaWVs
ZC52YWx1ZSArPSBteVZhbHVlOwoJCW15RmllbGQuZm9jdXMoKTsKCX0KfQpqczsKCQl9CgoJ
CWVsc2VpZiAoZ3BzKCduYW1lJykgPT0gJ3BvcCcpCgkJewoJCQlnbG9iYWwgJGltZ19kaXI7
CgoJCQkkaW1nX3VybCA9IGh1LiRpbWdfZGlyOwoKCQkJJGxhbmdfY29uZmlybV9vdmVyd3Jp
dGUgPSB1cG1faW1nX3BvcHBlcl9nVHh0KCdjb25maXJtX292ZXJ3cml0ZScpOwoJCQkkbGFu
Z19jaGVja19sZWF2ZSA9IHVwbV9pbWdfcG9wcGVyX2dUeHQoJ2NoZWNrX2xlYXZlJyk7CgoJ
CQloZWFkZXIoIkNvbnRlbnQtdHlwZTogdGV4dC9qYXZhc2NyaXB0Iik7CgoJCQllY2hvIDw8
PGpzCmZ1bmN0aW9uIG1ha2VXaW4odGl0bGUsIGNvbnRlbnQsIHcsIGgpCnsKCWlmICh3ICYm
IGgpCgl7CgkJdmFyIHd3ID0gcGFyc2VJbnQodyk7CgkJdmFyIHdoID0gcGFyc2VJbnQoaCk7
CgoJCWlmICh3dyA8IDEwMCkKCQl7CgkJCXd3ID0gMTI1OwoJCX0KCgkJaWYgKHdoIDwgMTAw
KQoJCXsKCQkJd2ggPSAxMjU7CgoJCQl3dyArPSA3NTsKCQl9CgoJCXZhciBzY3JvbGwgPSBm
YWxzZTsKCgkJaWYgKHNjcmVlbi53aWR0aCAmJiAoc2NyZWVuLndpZHRoIDwgd3cpKQoJCXsK
CQkJc2Nyb2xsID0gJ3llcyc7CgkJCXd3ID0gc2NyZWVuLndpZHRoOwoJCX0KCgkJaWYgKHNj
cmVlbi5oZWlnaHQgJiYgKHNjcmVlbi5oZWlnaHQgPCB3aCkpCgkJewoJCQlzY3JvbGwgPSAn
eWVzJzsKCQkJd2ggPSBzY3JlZW4uaGVpZ2h0OwoJCX0KCX0KCgllbHNlCgl7CgkJd3cgPSA0
NTA7CgkJd2ggPSAyNTA7Cgl9CgoJaWYgKCF0aXRsZSkKCXsKCQl0aXRsZSA9IG5hbWU7Cgl9
CgoJdmFyIHQgPSAoc2NyZWVuLmhlaWdodCkgPyAoc2NyZWVuLmhlaWdodCAtIHdoKSAvIDIg
OiAwOwoJdmFyIGwgPSAoc2NyZWVuLndpZHRoKSA/IChzY3JlZW4ud2lkdGggLSB3dykgLyAy
IDogMDsKCgl2YXIgZmFzdFdpbiA9IHdpbmRvdy5vcGVuKCcnLCAndXBtX2ltZ19wb3BwZXJf
cHJldmlldycsICd0b3AgPSAnK3QrJywgbGVmdCA9ICcrbCsnLCB3aWR0aCA9ICcrd3crJywg
aGVpZ2h0ID0gJyt3aCsnLCB0b29sYmFyID0gbm8sIGxvY2F0aW9uID0gbm8sIGRpcmVjdG9y
aWVzID0gbm8sIHN0YXR1cyA9IG5vLCBtZW51YmFyID0gbm8sIHNjcm9sbGJhcnMgPSAnK3Nj
cm9sbCsnLCBjb3B5aGlzdG9yeSA9IG5vLCByZXNpemFibGUgPSB5ZXMnKTsKCglmYXN0V2lu
LmRvY3VtZW50LndyaXRlbG4oJzwhRE9DVFlQRSBIVE1MIFBVQkxJQyAiLS8vVzNDLy9EVEQg
SFRNTCA0LjAxLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw0L3N0cmljdC5kdGQi
PicpOwoJZmFzdFdpbi5kb2N1bWVudC53cml0ZWxuKCc8aHRtbD4nKTsKCWZhc3RXaW4uZG9j
dW1lbnQud3JpdGVsbignPGhlYWQ+Jyk7CglmYXN0V2luLmRvY3VtZW50LndyaXRlbG4oJzxt
ZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQtVHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFy
c2V0PXV0Zi04Ij4nKTsKCWZhc3RXaW4uZG9jdW1lbnQud3JpdGVsbignPG1ldGEgaHR0cC1l
cXVpdj0iaW1hZ2V0b29sYmFyIiBjb250ZW50PSJubyI+Jyk7CglmYXN0V2luLmRvY3VtZW50
LndyaXRlbG4oJzx0aXRsZT4nK3RpdGxlKyc8L3RpdGxlPicpOwoJZmFzdFdpbi5kb2N1bWVu
dC53cml0ZWxuKCc8c3R5bGUgdHlwZT0idGV4dC9jc3MiPicpOwoJZmFzdFdpbi5kb2N1bWVu
dC53cml0ZWxuKCc8IS0tJyk7CglmYXN0V2luLmRvY3VtZW50LndyaXRlbG4oJ2JvZHkgeycp
OwoJZmFzdFdpbi5kb2N1bWVudC53cml0ZWxuKCdtYXJnaW46IDA7Jyk7CglmYXN0V2luLmRv
Y3VtZW50LndyaXRlbG4oJ3BhZGRpbmc6IDA7Jyk7CglmYXN0V2luLmRvY3VtZW50LndyaXRl
bG4oJ2NvbG9yOiAjMDAwOycpOwoJZmFzdFdpbi5kb2N1bWVudC53cml0ZWxuKCdiYWNrZ3Jv
dW5kLWNvbG9yOiAjZmZmOycpOwoJZmFzdFdpbi5kb2N1bWVudC53cml0ZWxuKCdib3JkZXIt
dG9wOiAxNXB4IHNvbGlkICNmYzM7Jyk7CglmYXN0V2luLmRvY3VtZW50LndyaXRlbG4oJ3Rl
eHQtYWxpZ246IGNlbnRlcjsnKTsKCglpZiAoc2Nyb2xsID09IGZhbHNlKQoJewoJCWZhc3RX
aW4uZG9jdW1lbnQud3JpdGVsbignb3ZlcmZsb3c6IGhpZGRlbjsnKTsKCX0KCglmYXN0V2lu
LmRvY3VtZW50LndyaXRlbG4oJ30nKTsKCglmYXN0V2luLmRvY3VtZW50LndyaXRlbG4oJycp
OwoJZmFzdFdpbi5kb2N1bWVudC53cml0ZWxuKCdpbWcgeycpOwoJZmFzdFdpbi5kb2N1bWVu
dC53cml0ZWxuKCdtYXJnaW46IDAgYXV0bzsnKTsKCWZhc3RXaW4uZG9jdW1lbnQud3JpdGVs
bigncGFkZGluZzogMDsnKTsKCWZhc3RXaW4uZG9jdW1lbnQud3JpdGVsbignYm9yZGVyOiBu
b25lOycpOwoKCWlmICh3aCA9PSAxMjUpCgl7CgkJZmFzdFdpbi5kb2N1bWVudC53cml0ZWxu
KCdtYXJnaW4tdG9wOiAnICsgTWF0aC5mbG9vcig1MC0oaC8yKSkgKyAncHg7Jyk7Cgl9CgoJ
ZmFzdFdpbi5kb2N1bWVudC53cml0ZWxuKCd9Jyk7CgoJZmFzdFdpbi5kb2N1bWVudC53cml0
ZWxuKCctLT4nKTsKCWZhc3RXaW4uZG9jdW1lbnQud3JpdGVsbignPC9zdHlsZT4nKTsKCWZh
c3RXaW4uZG9jdW1lbnQud3JpdGVsbignPC9oZWFkPicpOwoJZmFzdFdpbi5kb2N1bWVudC53
cml0ZWxuKCc8Ym9keT4nKTsKCWZhc3RXaW4uZG9jdW1lbnQud3JpdGVsbignPGRpdj4nKTsK
CWZhc3RXaW4uZG9jdW1lbnQud3JpdGVsbihjb250ZW50KTsKCWZhc3RXaW4uZG9jdW1lbnQu
d3JpdGVsbignPC9kaXY+Jyk7CglmYXN0V2luLmRvY3VtZW50LndyaXRlbG4oJzwvYm9keT4n
KTsKCWZhc3RXaW4uZG9jdW1lbnQud3JpdGUoJzwvaHRtbD4nKTsKCglmYXN0V2luLmRvY3Vt
ZW50LmNsb3NlKCk7CgoJZmFzdFdpbi5mb2N1cygpOwoKCXJldHVybiBmYWxzZTsKfQoKLy8g
LS0tCgpmdW5jdGlvbiBidWlsZFRhZyh0eXBlLCBpZCwgZXh0LCB3aWR0aCwgaGVpZ2h0LCBh
bHQsIHRpdGxlKQp7Cgl2YXIgaW5jX2FsdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdp
bmNfYWx0Jyk7Cgl2YXIgaW5jX3RpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lu
Y190aXRsZScpOwoKCXZhciBpbmNfd2lkdGggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgn
aW5jX3dpZHRoJyk7Cgl2YXIgaW5jX2hlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlk
KCdpbmNfaGVpZ2h0Jyk7CgoJdmFyIGluY19jbGFzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRC
eUlkKCdpbmNfY2xhc3MnKTsKCXZhciB0aGVfY2xhc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50
QnlJZCgndGhlX2NsYXNzJykudmFsdWU7CgoJdmFyIGN1c3RvbV9mb3JtID0gZG9jdW1lbnQu
Z2V0RWxlbWVudEJ5SWQoJ2N1c3RvbV9mb3JtJykudmFsdWU7CgoJaWYgKHR5cGUgPT0gJ2lt
YWdlJykKCXsKCQl2YXIgaW5zZXJ0ID0gJzx0eHA6aW1hZ2UgaWQ9IicraWQrJyInOwoKCQlp
ZiAoaW5jX2NsYXNzLmNoZWNrZWQgJiYgdGhlX2NsYXNzKQoJCXsKCQkJaW5zZXJ0ICs9ICcg
Y2xhc3M9IicrdGhlX2NsYXNzKyciJzsKCQl9Cgl9CgoJZWxzZSBpZiAodHlwZSA9PSAndGh1
bWInKQoJewoJCXZhciBpbnNlcnQgPSAnPHR4cDp0aHVtYm5haWwgaWQ9IicraWQrJyInOwoJ
fQoKCWVsc2UgaWYgKHR5cGUgPT0gJ3BvcHVwJykKCXsKCQl2YXIgaW5zZXJ0ID0gJzx0eHA6
dGh1bWJuYWlsIGlkPSInK2lkKyciIHBvcGxpbms9IjEiJzsKCX0KCgllbHNlIGlmICh0eXBl
ID09ICd0ZXh0aWxlJykKCXsKCQl2YXIgaW5zZXJ0ID0gJyEnOwoKCQlpZiAoaW5jX2NsYXNz
LmNoZWNrZWQgJiYgdGhlX2NsYXNzKQoJCXsKCQkJaW5zZXJ0ICs9ICcoJyt0aGVfY2xhc3Mr
JyknOwoJCX0KCgkJaW5zZXJ0ICs9ICckaW1nX3VybC8nK2lkK2V4dDsKCgkJaWYgKGluY19h
bHQuY2hlY2tlZCAmJiBhbHQpCgkJewoJCQlpbnNlcnQgKz0gJygnK2FsdCsnKSc7CgkJfQoK
CQlpbnNlcnQgKz0gJyEnOwoKCQlyZXR1cm4gaW5zZXJ0OwoJfQoKCWVsc2UgaWYgKHR5cGUg
PT0gJ3hodG1sJykKCXsKCQl2YXIgaW5zZXJ0ID0gJzxpbWcgc3JjPSIkaW1nX3VybC8nK2lk
K2V4dCsnIic7CgoJCWlmIChpbmNfY2xhc3MuY2hlY2tlZCAmJiB0aGVfY2xhc3MpCgkJewoJ
CQlpbnNlcnQgKz0gJyBjbGFzcz0iJyt0aGVfY2xhc3MrJyInOwoJCX0KCgkJaWYgKGluY193
aWR0aC5jaGVja2VkICYmIHdpZHRoKQoJCXsKCQkJaW5zZXJ0ICs9ICcgd2lkdGg9Iicrd2lk
dGgrJyInOwoJCX0KCgkJaWYgKGluY19oZWlnaHQuY2hlY2tlZCAmJiBoZWlnaHQpCgkJewoJ
CQlpbnNlcnQgKz0gJyBoZWlnaHQ9IicraGVpZ2h0KyciJzsKCQl9CgoJCWlmIChpbmNfYWx0
LmNoZWNrZWQgJiYgYWx0KQoJCXsKCQkJaW5zZXJ0ICs9ICcgYWx0PSInK2FsdCsnIic7CgkJ
fQoKCQllbHNlCgkJewoJCQlpbnNlcnQgKz0gJyBhbHQ9IiInOwoJCX0KCgkJaWYgKGluY190
aXRsZS5jaGVja2VkICYmIHRpdGxlKQoJCXsKCQkJaW5zZXJ0ICs9ICcgdGl0bGU9IicrdGl0
bGUrJyInOwoJCX0KCX0KCgllbHNlIGlmICh0eXBlID09ICdwbHVnaW4tY3VzdG9tJykKCXsK
CQl2YXIgaW5zZXJ0ID0gJzx0eHA6dXBtX2ltYWdlIGltYWdlX2lkPSInK2lkKyciIGZvcm09
IicrY3VzdG9tX2Zvcm0rJyInOwoJfQoKCWVsc2UKCXsKCQl0eXBlID0gbmV3IFN0cmluZyh0
eXBlKTsKCQl0eXBlID0gdHlwZS5yZXBsYWNlKCdwbHVnaW4tJywgJycpOwoKCQl2YXIgaW5z
ZXJ0ID0gJzx0eHA6dXBtX2ltYWdlIHR5cGU9IicrdHlwZSsnIiBpbWFnZV9pZD0iJytpZCsn
Iic7CgoJCWlmIChpbmNfY2xhc3MuY2hlY2tlZCAmJiB0aGVfY2xhc3MpCgkJewoJCQlpbnNl
cnQgKz0gJyBjbGFzcz0iJyt0aGVfY2xhc3MrJyInOwoJCX0KCgkJaWYgKGluY193aWR0aC5j
aGVja2VkID09IGZhbHNlKQoJCXsKCQkJaW5zZXJ0ICs9ICcgc2hvd193aWR0aD0ibm8iJzsK
CQl9CgoJCWlmIChpbmNfaGVpZ2h0LmNoZWNrZWQgPT0gZmFsc2UpCgkJewoJCQlpbnNlcnQg
Kz0gJyBzaG93X2hlaWdodD0ibm8iJzsKCQl9CgoJCWlmIChpbmNfYWx0LmNoZWNrZWQgPT0g
ZmFsc2UpCgkJewoJCQlpbnNlcnQgKz0gJyBzaG93X2FsdD0ibm8iJzsKCQl9CgoJCWlmIChp
bmNfdGl0bGUuY2hlY2tlZCA9PSBmYWxzZSkKCQl7CgkJCWluc2VydCArPSAnIHNob3dfdGl0
bGU9Im5vIic7CgkJfQoJfQoKCWluc2VydCArPSAnIC8+JzsKCglyZXR1cm4gaW5zZXJ0Owp9
CgovLyAtLS0KCmZ1bmN0aW9uIGluc2VydFRhZyh0eXBlLCBpZCwgZXh0LCB3aWR0aCwgaGVp
Z2h0LCBhbHQsIHRpdGxlKQp7Cgl2YXIgaW5zZXJ0ID0gYnVpbGRUYWcodHlwZSwgaWQsIGV4
dCwgd2lkdGgsIGhlaWdodCwgYWx0LCB0aXRsZSk7CgoJaWYgKHdpbmRvdy5vcGVuZXIuZG9j
dW1lbnQuYXJ0aWNsZV9mb3JtKQoJewoJCWlmICh0eXBlID09ICdhcHBlbmQtYXJ0aWNsZS1p
bWFnZScpCgkJewoJCQlpZiAod2luZG93Lm9wZW5lci5kb2N1bWVudC5nZXRFbGVtZW50QnlJ
ZCgnYXJ0aWNsZS1pbWFnZScpLnZhbHVlID09ICcnKQoJCQl7CgkJCQl3aW5kb3cub3BlbmVy
LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcnRpY2xlLWltYWdlJykudmFsdWUgPSBpZDsK
CQkJCXJldHVybiBzaG93TXNnKCdzdWNjZXNzJyk7CgkJCX0KCgkJCWVsc2UKCQkJewoJCQkJ
d2luZG93Lm9wZW5lci5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJ0aWNsZS1pbWFnZScp
LnZhbHVlICs9ICcsJytpZDsKCQkJCXJldHVybiBzaG93TXNnKCdzdWNjZXNzJyk7CgkJCX0K
CQl9CgoJCWVsc2UgaWYgKHR5cGUgPT0gJ3JlcGxhY2UtYXJ0aWNsZS1pbWFnZScpCgkJewoJ
CQlpZiAod2luZG93Lm9wZW5lci5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJ0aWNsZS1p
bWFnZScpLnZhbHVlLmxlbmd0aCA+IDEpCgkJCXsKCQkJCXZhciBvcHRpb24gPSBjb25maXJt
KCckbGFuZ19jb25maXJtX292ZXJ3cml0ZScpOwoKCQkJCWlmIChvcHRpb24pCgkJCQl7CgkJ
CQkJd2luZG93Lm9wZW5lci5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJ0aWNsZS1pbWFn
ZScpLnZhbHVlID0gaWQ7CgkJCQkJcmV0dXJuIHNob3dNc2coJ3N1Y2Nlc3MnKTsKCQkJCX0K
CQkJfQoKCQkJZWxzZQoJCQl7CgkJCQl3aW5kb3cub3BlbmVyLmRvY3VtZW50LmdldEVsZW1l
bnRCeUlkKCdhcnRpY2xlLWltYWdlJykudmFsdWUgPSBpZDsKCQkJCXJldHVybiBzaG93TXNn
KCdzdWNjZXNzJyk7CgkJCX0KCQl9CgoJCWVsc2UKCQl7CgkJCXZhciB0ZW1wID0gJ3dpbmRv
dy5vcGVuZXIuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQod2luZG93Lm9wZW5lci5jdXJyZW50
KSc7CgoJCQl0ZW1wID0gZXZhbCh0ZW1wKTsKCgkJCXdpbmRvdy5vcGVuZXIudXBtX2ltZ19w
b3BwZXJfaW5zZXJ0KHRlbXAsIGluc2VydCk7CgoJCQlyZXR1cm4gc2hvd01zZygnc3VjY2Vz
cycpOwoJCX0KCX0KCgllbHNlIGlmICh3aW5kb3cub3BlbmVyLmRvY3VtZW50LmdldEVsZW1l
bnRCeUlkKCdmb3JtJykpCgl7CgkJd2luZG93Lm9wZW5lci51cG1faW1nX3BvcHBlcl9pbnNl
cnQod2luZG93Lm9wZW5lci5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybScpLCBpbnNl
cnQpOwoJCXJldHVybiBzaG93TXNnKCdzdWNjZXNzJyk7Cgl9CgoJZWxzZSBpZiAod2luZG93
Lm9wZW5lci5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaHRtbCcpKQoJewoJCXdpbmRvdy5v
cGVuZXIudXBtX2ltZ19wb3BwZXJfaW5zZXJ0KHdpbmRvdy5vcGVuZXIuZG9jdW1lbnQuZ2V0
RWxlbWVudEJ5SWQoJ2h0bWwnKSwgaW5zZXJ0KTsKCQlyZXR1cm4gc2hvd01zZygnc3VjY2Vz
cycpOwoJfQoKCXJldHVybiBzaG93TXNnKCdmYWlsZWQnKTsKfQoKLy8gLS0tCgpmdW5jdGlv
biB3YXJuRWRpdEltYWdlKGlkKQp7CglpZiAod2luZG93Lm9wZW5lci5kb2N1bWVudC5nZXRF
bGVtZW50QnlJZCgnYm9keScpLnZhbHVlICE9IHdpbmRvdy5vcGVuZXIuZG9jdW1lbnQuZ2V0
RWxlbWVudEJ5SWQoJ3VwbV9pbWdfcG9wcGVyX3N0YXJ0JykudmFsdWUpCgl7CgkJdmFyIGNo
ZWNrID0gY29uZmlybSgnJGxhbmdfY2hlY2tfbGVhdmUnKTsKCgkJaWYgKGNoZWNrKQoJCXsK
CQkJZ29FZGl0SW1hZ2UoaWQpOwoJCX0KCX0KCgllbHNlCgl7CgkJZ29FZGl0SW1hZ2UoaWQp
OwoJfQoKCXJldHVybiBmYWxzZTsKfQoKLy8gLS0tCgpmdW5jdGlvbiBnb0VkaXRJbWFnZShp
ZCkKewoJd2luZG93Lm9wZW5lci5mb2N1cygpOwoKCWlmICh3aW5kb3cub3BlbmVyLmRvY3Vt
ZW50LmFydGljbGUuc3RlcC52YWx1ZSAhPSAnY3JlYXRlJykKCXsKCQlkb2N1bWVudC5nZXRF
bGVtZW50QnlJZCgneWVzJykuc2V0QXR0cmlidXRlKCdocmVmJywgd2luZG93Lm9wZW5lci5k
b2N1bWVudC5sb2NhdGlvbik7CgkJc2hvd01zZygncmV0dXJuJyk7Cgl9CgoJd2luZG93Lm9w
ZW5lci5kb2N1bWVudC5sb2NhdGlvbiA9ICc/ZXZlbnQ9aW1hZ2VcdTAwMjZzdGVwPWltYWdl
X2VkaXRcdTAwMjZpZD0nK2lkOwp9CgovLyAtLS0KCmZ1bmN0aW9uIGdvQmFjayh1cmwpCnsK
CXdpbmRvdy5vcGVuZXIuZm9jdXMoKTsKCglkb25lKCdyZXR1cm4nKTsKCgl3aW5kb3cub3Bl
bmVyLmRvY3VtZW50LmxvY2F0aW9uID0gdXJsOwp9CgovLyAtLS0KCmZ1bmN0aW9uIHNob3dN
c2coaWQpCnsKCXZhciBvYmogPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7CgoJdmFy
IHdpZHRoID0gcGFyc2VJbnQob2JqLnN0eWxlLndpZHRoKTsKCXZhciBoZWlnaHQgPSBwYXJz
ZUludChvYmouc3R5bGUuaGVpZ2h0KTsKCgl2YXIgdG9wID0gMTAwICsgc2Nyb2xsVG9wKCk7
Cgl2YXIgbGVmdCA9ICggKHBhZ2VXaWR0aCgpIC8gMikgLSAod2lkdGggLyAyKSApICsgc2Ny
b2xsTGVmdCgpOwoKCW9iai5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7CglvYmouc3R5
bGUudG9wID0gdG9wICsgJ3B4JzsKCW9iai5zdHlsZS5sZWZ0ID0gbGVmdCArICdweCc7Cglv
Ymouc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CgoJaWYgKGlkICE9ICdyZXR1cm4nKQoJewoJ
CXNldFRpbWVvdXQoImRvbmUoJyIraWQrIicpIiwgMTAwMCk7Cgl9Cn0KCi8vIC0tLQoKZnVu
Y3Rpb24gZG9uZShpZCkKewoJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLnN0eWxlLmRp
c3BsYXkgPSAnbm9uZSc7Cn0KCi8vIC0tLQoKZnVuY3Rpb24gcGFnZVdpZHRoKCkKewoJaWYg
KHNlbGYuaW5uZXJXaWR0aCkKCXsKCQlyZXR1cm4gc2VsZi5pbm5lcldpZHRoOwoJfQoKCWVs
c2UgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVs
ZW1lbnQuY2xpZW50V2lkdGgpCgl7CgkJcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVu
dC5jbGllbnRXaWR0aDsKCX0KCglyZXR1cm4gMDsKfQoKLy8gLS0tCgpmdW5jdGlvbiBzY3Jv
bGxUb3AoKQp7CglpZiAoc2VsZi5wYWdlWU9mZnNldCkKCXsKCQlyZXR1cm4gc2VsZi5wYWdl
WU9mZnNldDsKCX0KCgllbHNlIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9j
dW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCkKCXsKCQlyZXR1cm4gZG9jdW1lbnQu
ZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDsKCX0KCglyZXR1cm4gMDsKfQoKLy8gLS0tCgpm
dW5jdGlvbiBzY3JvbGxMZWZ0KCkKewoJaWYgKHNlbGYucGFnZVlPZmZzZXQpCgl7CgkJcmV0
dXJuIHNlbGYucGFnZVhPZmZzZXQ7Cgl9CgoJZWxzZSBpZiAoZG9jdW1lbnQuZG9jdW1lbnRF
bGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApCgl7CgkJcmV0
dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0OwoJfQoKCXJldHVybiAw
Owp9CgpqczsKCQl9CgoJCWV4aXQoMCk7Cgl9CgovLyAtLS0KCglmdW5jdGlvbiB1cG1faW1n
X3BvcHBlcl9wcmVmcygkZXZlbnQsICRzdGVwKQoJewoJCWdsb2JhbCAkcHJlZnM7CgoJCXBh
Z2V0b3AodXBtX2ltZ19wb3BwZXJfZ1R4dCgncHJlZnMnKSwgKCRzdGVwID09ICd1cGRhdGUn
ID8gZ1R4dCgncHJlZmVyZW5jZXNfc2F2ZWQnKSA6ICcnKSk7CgoJCWlmICgkc3RlcCA9PSAn
dXBkYXRlJykKCQl7CgkJCWV4dHJhY3QoZG9TbGFzaChwc2FzKGFycmF5KAoJCQkJJ3Nob3df
d2lkdGgnLCAnc2hvd19oZWlnaHQnLCAnc2hvd19hbHQnLCAnc2hvd190aXRsZScsICdzaG93
X2NsYXNzJywgJ3RoZV9jbGFzcycsICdjdXN0b21fZm9ybScsCgkJCQknc2hvd19mb3JtJywg
J2FkbWluX3BvcHVwX3dpZHRoJywgJ2FkbWluX3BvcHVwX2hlaWdodCcKCQkJKSkpKTsKCgkJ
CSRzaG93X3dpZHRoICA9ICgkc2hvd193aWR0aCA9PSAnMScpID8gJHNob3dfd2lkdGggOiAn
MCc7CgkJCSRzaG93X2hlaWdodCA9ICgkc2hvd19oZWlnaHQgPT0gJzEnKSA/ICRzaG93X2hl
aWdodCA6ICcwJzsKCQkJJHNob3dfYWx0ICAgID0gKCRzaG93X2FsdCA9PSAnMScpID8gJHNo
b3dfYWx0IDogJzAnOwoJCQkkc2hvd190aXRsZSAgPSAoJHNob3dfdGl0bGUgPT0gJzEnKSA/
ICRzaG93X3RpdGxlIDogJzAnOwoJCQkkc2hvd19jbGFzcyAgPSAoJHNob3dfY2xhc3MgPT0g
JzEnKSA/ICRzaG93X2NsYXNzIDogJzAnOwoKCQkJJHRoZV9jbGFzcyAgID0gcHJlZ19yZXBs
YWNlKCIvKF58JlxTKzspfCg8W14+XSo+KS9VIiwgJycsIGR1bWJEb3duKCR0aGVfY2xhc3Mp
KTsKCQkJJGN1c3RvbV9mb3JtID0gc2FuaXRpemVGb3JVcmwoJGN1c3RvbV9mb3JtKTsKCgkJ
CWlmIChlbXB0eSgkYWRtaW5fcG9wdXBfd2lkdGgpKQoJCQl7CgkJCQkkYWRtaW5fcG9wdXBf
d2lkdGggPSAnNzI1JzsKCQkJfQoKCQkJaWYgKGVtcHR5KCRhZG1pbl9wb3B1cF9oZWlnaHQp
KQoJCQl7CgkJCQkkYWRtaW5fcG9wdXBfaGVpZ2h0ID0gJzQwMCc7CgkJCX0KCgkJCXNhZmVf
dXBkYXRlKCd0eHBfcHJlZnMnLCAidmFsID0gJyRzaG93X3dpZHRoJyIsICJuYW1lID0gJ3Vw
bV9pbWdfcG9wcGVyX3Nob3dfd2lkdGgnIik7CgkJCXNhZmVfdXBkYXRlKCd0eHBfcHJlZnMn
LCAidmFsID0gJyRzaG93X2hlaWdodCciLCAibmFtZSA9ICd1cG1faW1nX3BvcHBlcl9zaG93
X2hlaWdodCciKTsKCQkJc2FmZV91cGRhdGUoJ3R4cF9wcmVmcycsICJ2YWwgPSAnJHNob3df
YWx0JyIsICJuYW1lID0gJ3VwbV9pbWdfcG9wcGVyX3Nob3dfYWx0JyIpOwoJCQlzYWZlX3Vw
ZGF0ZSgndHhwX3ByZWZzJywgInZhbCA9ICckc2hvd190aXRsZSciLCAibmFtZSA9ICd1cG1f
aW1nX3BvcHBlcl9zaG93X3RpdGxlJyIpOwoJCQlzYWZlX3VwZGF0ZSgndHhwX3ByZWZzJywg
InZhbCA9ICckc2hvd19jbGFzcyciLCAibmFtZSA9ICd1cG1faW1nX3BvcHBlcl9zaG93X2Ns
YXNzJyIpOwoJCQlzYWZlX3VwZGF0ZSgndHhwX3ByZWZzJywgInZhbCA9ICckdGhlX2NsYXNz
JyIsICJuYW1lID0gJ3VwbV9pbWdfcG9wcGVyX3RoZV9jbGFzcyciKTsKCQkJc2FmZV91cGRh
dGUoJ3R4cF9wcmVmcycsICJ2YWwgPSAnJGN1c3RvbV9mb3JtJyIsICJuYW1lID0gJ3VwbV9p
bWdfcG9wcGVyX2N1c3RvbV9mb3JtJyIpOwoKCQkJc2FmZV91cGRhdGUoJ3R4cF9wcmVmcycs
ICJ2YWwgPSAnJHNob3dfZm9ybSciLCAibmFtZSA9ICd1cG1faW1nX3BvcHBlcl9zaG93X2Zv
cm0nIik7CgkJCXNhZmVfdXBkYXRlKCd0eHBfcHJlZnMnLCAidmFsID0gJyRhZG1pbl9wb3B1
cF93aWR0aCciLCAibmFtZSA9ICd1cG1faW1nX3BvcHBlcl9hZG1pbl9wb3B1cF93aWR0aCci
KTsKCQkJc2FmZV91cGRhdGUoJ3R4cF9wcmVmcycsICJ2YWwgPSAnJGFkbWluX3BvcHVwX2hl
aWdodCciLCAibmFtZSA9ICd1cG1faW1nX3BvcHBlcl9hZG1pbl9wb3B1cF9oZWlnaHQnIik7
CgoJCQkkcHJlZnMgPSBnZXRfcHJlZnMoKTsKCQl9CgoJCWVjaG8gbi5uLic8ZGl2IHN0eWxl
PSJtYXJnaW46IDNlbSBhdXRvIGF1dG8gYXV0bzsgd2lkdGg6IDIwZW07Ij4nLgoKCQluLm4u
aGVkKHVwbV9pbWdfcG9wcGVyX2dUeHQoJ3ByZWZzJyksICcxJykuCgoJCW4ubi5mb3JtKAoJ
CQluLmVJbnB1dCgndXBtX2ltZ19wb3BwZXJfcHJlZnMnKS4KCQkJbi5zSW5wdXQoJ3VwZGF0
ZScpLgoKCQkJbi5uLnRhZygKCQkJCW4ubi50YWcodXBtX2ltZ19wb3BwZXJfZ1R4dCgncHVi
bGljX3NpZGUnKSwgJ2xlZ2VuZCcpLgoKCQkJCW4ubi5ncmFmKAoJCQkJCXVwbV9pbWdfcG9w
cGVyX2dUeHQoJ3Nob3dfd2lkdGgnKS5ici4KCQkJCQluLnllc25vUmFkaW8oJ3Nob3dfd2lk
dGgnLCAkcHJlZnNbJ3VwbV9pbWdfcG9wcGVyX3Nob3dfd2lkdGgnXSkKCQkJCSkuCgoJCQkJ
bi5uLmdyYWYoCgkJCQkJdXBtX2ltZ19wb3BwZXJfZ1R4dCgnc2hvd19oZWlnaHQnKS5ici4K
CQkJCQluLnllc25vUmFkaW8oJ3Nob3dfaGVpZ2h0JywgJHByZWZzWyd1cG1faW1nX3BvcHBl
cl9zaG93X2hlaWdodCddKQoJCQkJKS4KCgkJCQluLm4uZ3JhZigKCQkJCQl1cG1faW1nX3Bv
cHBlcl9nVHh0KCdzaG93X2FsdCcpLmJyLgoJCQkJCW4ueWVzbm9SYWRpbygnc2hvd19hbHQn
LCAkcHJlZnNbJ3VwbV9pbWdfcG9wcGVyX3Nob3dfYWx0J10pCgkJCQkpLgoKCQkJCW4ubi5n
cmFmKAoJCQkJCXVwbV9pbWdfcG9wcGVyX2dUeHQoJ3Nob3dfdGl0bGUnKS5ici4KCQkJCQlu
Lnllc25vUmFkaW8oJ3Nob3dfdGl0bGUnLCAkcHJlZnNbJ3VwbV9pbWdfcG9wcGVyX3Nob3df
dGl0bGUnXSkKCQkJCSkuCgoJCQkJbi5uLmdyYWYoCgkJCQkJdXBtX2ltZ19wb3BwZXJfZ1R4
dCgnc2hvd19jbGFzcycpLmJyLgoJCQkJCW4ueWVzbm9SYWRpbygnc2hvd19jbGFzcycsICRw
cmVmc1sndXBtX2ltZ19wb3BwZXJfc2hvd19jbGFzcyddKQoJCQkJKS4KCgkJCQluLm4uZ3Jh
ZigKCQkJCQl1cG1faW1nX3BvcHBlcl9nVHh0KCd0aGVfY2xhc3MnKS5ici4KCQkJCQluLmZJ
bnB1dCgndGV4dCcsICd0aGVfY2xhc3MnLCAkcHJlZnNbJ3VwbV9pbWdfcG9wcGVyX3RoZV9j
bGFzcyddLCAnZWRpdCcpCgkJCQkpLgoKCQkJCW4ubi5ncmFmKAoJCQkJCXVwbV9pbWdfcG9w
cGVyX2dUeHQoJ2N1c3RvbV9mb3JtJykuYnIuCgkJCQkJbi5mSW5wdXQoJ3RleHQnLCAnY3Vz
dG9tX2Zvcm0nLCAkcHJlZnNbJ3VwbV9pbWdfcG9wcGVyX2N1c3RvbV9mb3JtJ10sICdlZGl0
JykKCQkJCSkKCQkJLCAnZmllbGRzZXQnKS4KCgkJCW4ubi50YWcoCgkJCQluLm4udGFnKHVw
bV9pbWdfcG9wcGVyX2dUeHQoJ2FkbWluX3NpZGUnKSwgJ2xlZ2VuZCcpLgoKCQkJCW4ubi5n
cmFmKAoJCQkJCXVwbV9pbWdfcG9wcGVyX2dUeHQoJ3Nob3dfZm9ybScpLmJyLgoJCQkJCW4u
eWVzbm9SYWRpbygnc2hvd19mb3JtJywgJHByZWZzWyd1cG1faW1nX3BvcHBlcl9zaG93X2Zv
cm0nXSkKCQkJCSkuCgoJCQkJbi5uLmdyYWYoCgkJCQkJdXBtX2ltZ19wb3BwZXJfZ1R4dCgn
YWRtaW5fcG9wdXBfd2lkdGgnKS5ici4KCQkJCQluLmZJbnB1dCgndGV4dCcsICdhZG1pbl9w
b3B1cF93aWR0aCcsICRwcmVmc1sndXBtX2ltZ19wb3BwZXJfYWRtaW5fcG9wdXBfd2lkdGgn
XSwgJ2VkaXQnKQoJCQkJKS4KCgkJCQluLm4uZ3JhZigKCQkJCQl1cG1faW1nX3BvcHBlcl9n
VHh0KCdhZG1pbl9wb3B1cF9oZWlnaHQnKS5ici4KCQkJCQluLmZJbnB1dCgndGV4dCcsICdh
ZG1pbl9wb3B1cF9oZWlnaHQnLCAkcHJlZnNbJ3VwbV9pbWdfcG9wcGVyX2FkbWluX3BvcHVw
X2hlaWdodCddLCAnZWRpdCcpCgkJCQkpCgoJCQksICdmaWVsZHNldCcpLgoKCQkJbi5uLmZJ
bnB1dCgnc3VibWl0JywgJ3VwZGF0ZScsICdVcGRhdGUnLCAnc21hbGxlcmJveCcpCgoJCSku
bi5uLic8L2Rpdj4nOwoJfQoKLy8gLS0tCgoJZnVuY3Rpb24gdXBtX2ltZ19wb3BwZXJfaW5z
dGFsbCgpCgl7CgkJZ2xvYmFsICRwcmVmczsKCgkJJHVwZGF0ZWQgPSBmYWxzZTsKCgkJJHNl
dHRpbmdzID0gInByZWZzX2lkID0gMSwgdHlwZSA9IDIsIGV2ZW50ID0gJ2FkbWluJywgcG9z
aXRpb24gPSAwIjsKCgkJaWYgKCFpc3NldCgkcHJlZnNbJ3VwbV9pbWdfcG9wcGVyX3Nob3df
d2lkdGgnXSkpCgkJewoJCQlzYWZlX2luc2VydCgndHhwX3ByZWZzJywgIgoJCQkJbmFtZSA9
ICd1cG1faW1nX3BvcHBlcl9zaG93X3dpZHRoJywKCQkJCXZhbCA9ICcxJywKCQkJCWh0bWwg
PSAneWVzbm9yYWRpbycsCgkJCQkkc2V0dGluZ3MKCQkJIik7CgoJCQkkdXBkYXRlZCA9IHRy
dWU7CgkJfQoKCQlpZiAoIWlzc2V0KCRwcmVmc1sndXBtX2ltZ19wb3BwZXJfc2hvd19oZWln
aHQnXSkpCgkJewoJCQlzYWZlX2luc2VydCgndHhwX3ByZWZzJywgIgoJCQkJbmFtZSA9ICd1
cG1faW1nX3BvcHBlcl9zaG93X2hlaWdodCcsCgkJCQl2YWwgPSAnMScsCgkJCQlodG1sID0g
J3llc25vcmFkaW8nLAoJCQkJJHNldHRpbmdzCgkJCSIpOwoKCQkJJHVwZGF0ZWQgPSB0cnVl
OwoJCX0KCgkJaWYgKCFpc3NldCgkcHJlZnNbJ3VwbV9pbWdfcG9wcGVyX3Nob3dfYWx0J10p
KQoJCXsKCQkJc2FmZV9pbnNlcnQoJ3R4cF9wcmVmcycsICIKCQkJCW5hbWUgPSAndXBtX2lt
Z19wb3BwZXJfc2hvd19hbHQnLAoJCQkJdmFsID0gJzEnLAoJCQkJaHRtbCA9ICd5ZXNub3Jh
ZGlvJywKCQkJCSRzZXR0aW5ncwoJCQkiKTsKCgkJCSR1cGRhdGVkID0gdHJ1ZTsKCQl9CgoJ
CWlmICghaXNzZXQoJHByZWZzWyd1cG1faW1nX3BvcHBlcl9zaG93X3RpdGxlJ10pKQoJCXsK
CQkJc2FmZV9pbnNlcnQoJ3R4cF9wcmVmcycsICIKCQkJCW5hbWUgPSAndXBtX2ltZ19wb3Bw
ZXJfc2hvd190aXRsZScsCgkJCQl2YWwgPSAnMScsCgkJCQlodG1sID0gJ3llc25vcmFkaW8n
LAoJCQkJJHNldHRpbmdzCgkJCSIpOwoKCQkJJHVwZGF0ZWQgPSB0cnVlOwoJCX0KCgkJaWYg
KCFpc3NldCgkcHJlZnNbJ3VwbV9pbWdfcG9wcGVyX3Nob3dfY2xhc3MnXSkpCgkJewoJCQlz
YWZlX2luc2VydCgndHhwX3ByZWZzJywgIgoJCQkJbmFtZSA9ICd1cG1faW1nX3BvcHBlcl9z
aG93X2NsYXNzJywKCQkJCXZhbCA9ICcxJywKCQkJCWh0bWwgPSAneWVzbm9yYWRpbycsCgkJ
CQkkc2V0dGluZ3MKCQkJIik7CgoJCQkkdXBkYXRlZCA9IHRydWU7CgkJfQoKCQlpZiAoIWlz
c2V0KCRwcmVmc1sndXBtX2ltZ19wb3BwZXJfdGhlX2NsYXNzJ10pKQoJCXsKCQkJc2FmZV9p
bnNlcnQoJ3R4cF9wcmVmcycsICIKCQkJCW5hbWUgPSAndXBtX2ltZ19wb3BwZXJfdGhlX2Ns
YXNzJywKCQkJCXZhbCA9ICdpbWFnZScsCgkJCQlodG1sID0gJ3RleHRfaW5wdXQnLAoJCQkJ
JHNldHRpbmdzCgkJCSIpOwoKCQkJJHVwZGF0ZWQgPSB0cnVlOwoJCX0KCgkJaWYgKCFpc3Nl
dCgkcHJlZnNbJ3VwbV9pbWdfcG9wcGVyX2N1c3RvbV9mb3JtJ10pKQoJCXsKCQkJc2FmZV9p
bnNlcnQoJ3R4cF9wcmVmcycsICIKCQkJCW5hbWUgPSAndXBtX2ltZ19wb3BwZXJfY3VzdG9t
X2Zvcm0nLAoJCQkJdmFsID0gJ3VwbV9pbWdfcG9wcGVyJywKCQkJCWh0bWwgPSAndGV4dF9p
bnB1dCcsCgkJCQkkc2V0dGluZ3MKCQkJIik7CgoJCQkkdXBkYXRlZCA9IHRydWU7CgkJfQoK
CQlpZiAoIWlzc2V0KCRwcmVmc1sndXBtX2ltZ19wb3BwZXJfc2hvd19mb3JtJ10pKQoJCXsK
CQkJc2FmZV9pbnNlcnQoJ3R4cF9wcmVmcycsICIKCQkJCW5hbWUgPSAndXBtX2ltZ19wb3Bw
ZXJfc2hvd19mb3JtJywKCQkJCXZhbCA9ICcxJywKCQkJCWh0bWwgPSAneWVzbm9yYWRpbycs
CgkJCQkkc2V0dGluZ3MKCQkJIik7CgoJCQkkdXBkYXRlZCA9IHRydWU7CgkJfQoKCQlpZiAo
IWlzc2V0KCRwcmVmc1sndXBtX2ltZ19wb3BwZXJfYWRtaW5fcG9wdXBfd2lkdGgnXSkpCgkJ
ewoJCQlzYWZlX2luc2VydCgndHhwX3ByZWZzJywgIgoJCQkJbmFtZSA9ICd1cG1faW1nX3Bv
cHBlcl9hZG1pbl9wb3B1cF93aWR0aCcsCgkJCQl2YWwgPSAnNzI1JywKCQkJCWh0bWwgPSAn
dGV4dF9pbnB1dCcsCgkJCQkkc2V0dGluZ3MKCQkJIik7CgoJCQkkdXBkYXRlZCA9IHRydWU7
CgkJfQoKCQlpZiAoIWlzc2V0KCRwcmVmc1sndXBtX2ltZ19wb3BwZXJfYWRtaW5fcG9wdXBf
aGVpZ2h0J10pKQoJCXsKCQkJc2FmZV9pbnNlcnQoJ3R4cF9wcmVmcycsICIKCQkJCW5hbWUg
PSAndXBtX2ltZ19wb3BwZXJfYWRtaW5fcG9wdXBfaGVpZ2h0JywKCQkJCXZhbCA9ICc0MDAn
LAoJCQkJaHRtbCA9ICd0ZXh0X2lucHV0JywKCQkJCSRzZXR0aW5ncwoJCQkiKTsKCgkJCSR1
cGRhdGVkID0gdHJ1ZTsKCQl9CgoJCWlmICgkdXBkYXRlZCkKCQl7CgkJCSRHTE9CQUxTWydw
cmVmcyddID0gZ2V0X3ByZWZzKCk7CgkJfQoJfQoKLy8gLS0tCgoJZnVuY3Rpb24gdXBtX2lt
Z19wb3BwZXJfZ1R4dCgkd2hhdCwgJGF0dHMgPSBhcnJheSgpKQoJewoJCSRsYW5nID0gYXJy
YXkoCgkJCSdhZG1pbl9wb3B1cF93aWR0aCcgICAgID0+ICdQb3B1cCB3aWR0aCcsCgkJCSdh
ZG1pbl9wb3B1cF9oZWlnaHQnICAgID0+ICdQb3B1cCBoZWlnaHQnLAoJCQknYWRtaW5fc2lk
ZScgICAgICAgICAgICA9PiAnQWRtaW4nLAoJCQknYWx0X3RleHRfZm9yJwkJPT4gJ0FsdGVy
bmF0ZSB0ZXh0IGZvcicsCgkJCSdhcnRpY2xlX2ltYWdlX2FwcGVuZCcJPT4gJ0FydGljbGUg
aW1hZ2UgKGFwcGVuZCknLAoJCQknYXJ0aWNsZV9pbWFnZV9yZXBsYWNlJyA9PiAnQXJ0aWNs
ZSBpbWFnZSAocmVwbGFjZSknLAoJCQknYXNzaWduX2NsYXNzJwkJPT4gJ2Fzc2lnbiBjbGFz
cycsCgkJCSdidWlsdF9pbicJCT0+ICdCdWlsdC1pbicsCgkJCSdjYXB0aW9uX2ZvcicJCT0+
ICdDYXB0aW9uIGZvcicsCgkJCSdjaGVja19sZWF2ZScJCT0+ICdZb3UgaGF2ZSBtYWRlIGNo
YW5nZXMgdG8gdGhlIGN1cnJlbnQgcG9zdCB3aGljaCB5b3UgaGF2ZSBub3Qgc2F2ZWQuIENv
bnRpbnVlIHdpdGhvdXQgc2F2aW5nPycsCgkJCSdjb25maXJtX292ZXJ3cml0ZScJPT4gJ1lv
dSBoYXZlIG1vcmUgdGhhbiBvbmUgYXJ0aWNsZSBpbWFnZSBkZWZpbmVkLiBUaGlzIGFjdGlv
biB3aWxsIG92ZXJ3cml0ZSB0aGUgZW50aXJlIGxpc3QuIENvbnRpbnVlPycsCgkJCSdjdXN0
b21fZm9ybScJCT0+ICdDdXN0b20gZm9ybScsCgkJCSdmYWlsZWQnCQk9PiAnSW5zZXJ0IGZh
aWxlZC4nLAoJCQknZm9yJwkJCT0+ICdmb3InLAoJCQknaW1hZ2UnCQkJPT4gJ0ltYWdlJywK
CQkJJ2ltYWdlX3NlbGVjdG9yJwk9PiAnSW1hZ2UgU2VsZWN0b3InLAoJCQknaW5jbHVkZScJ
CT0+ICdpbmNsdWRlJywKCQkJJ2luY2x1ZGVfYWx0JwkJPT4gJ2luY2x1ZGUgYWx0IHRleHQn
LAoJCQknaW5jbHVkZV9jYXB0aW9uJwk9PiAnaW5jbHVkZSBjYXB0aW9uJywKCQkJJ2luY2x1
ZGVfaGVpZ2h0Jwk9PiAnaW5jbHVkZSBoZWlnaHQnLAoJCQknaW5jbHVkZV93aWR0aCcJCT0+
ICdpbmNsdWRlIHdpZHRoJywKCQkJJ2luc2VydCcJCT0+ICdJbnNlcnQnLAoJCQknaW5zZXJ0
X2ltYWdlJwkJPT4gJ0luc2VydCBJbWFnZScsCgkJCSdpbnNlcnRfcGx1Z2luJwkJPT4gJ0lu
c2VydCAodXBtX2ltYWdlKScsCgkJCSdub190aHVtYm5haWwnCQk9PiAnVGh1bWJuYWlsIG5v
dCBmb3VuZC4nLAoJCQknb3ZlcnJpZGUnCQk9PiAnb3ZlcnJpZGVzIGFsbCBvcHRpb25hbCBw
YXJhbWV0ZXJzJywKCQkJJ3BvcHVwJwkJCT0+ICdQb3B1cCcsCgkJCSdwcmVmcycJCQk9PiAn
dXBtX2ltZ19wb3BwZXIgUHJlZmVyZW5jZXMnLAoJCQkncHVibGljX3NpZGUnICAgICAgICAg
ICA9PiAnUHVibGljJywKCQkJJ3JldHVybicJCT0+ICdSZXR1cm4gdG8gZWRpdGluZyB0aGUg
cG9zdD8nLAoJCQknc2hvd19hbHQnCQk9PiAnU2hvdyBhbHRlcm5hdGUgdGV4dD8nLAoJCQkn
c2hvd19jbGFzcycJCT0+ICdTaG93IGNsYXNzPycsCgkJCSdzaG93X2hlaWdodCcJCT0+ICdT
aG93IGhlaWdodD8nLAoJCQknc2hvd190aXRsZScJCT0+ICdTaG93IGNhcHRpb24/JywKCQkJ
J3Nob3dfd2lkdGgnCQk9PiAnU2hvdyB3aWR0aD8nLAoJCQknc2hvd19mb3JtJwkJPT4gJ1No
b3cgY3VzdG9taXphdGlvbiBvcHRpb25zIGluIHBvcHVwPycsCgkJCSdzdWNjZXNzJwkJPT4g
J1N1Y2Nlc3MuJywKCQkJJ3RoZV9jbGFzcycJCT0+ICdUaGUgY2xhc3MnLAoJCQkndmlld19h
bGwnCQk9PiAnVmlldyBBbGwnCgkJKTsKCgkJcmV0dXJuIHN0cnRyKCRsYW5nWyR3aGF0XSwg
JGF0dHMpOwoJfQoKCWZ1bmN0aW9uIG5hdl9mb3JtX3VwbSgkZXZlbnQsICRibSwgJHBhZ2Us
ICRudW1QYWdlcywgJHNvcnQsICRkaXIsICRjcml0LCAkc2VhcmNoX21ldGhvZCwgJHRvdGFs
PTAsICRsaW1pdD0wLCAkc3RlcD0nbGlzdCcpCgl7CgkJZ2xvYmFsICR0aGVtZTsKCQlpZiAo
JGNyaXQgIT0gJycgJiYgJHRvdGFsID4gMSkKCQl7CgkJCSRvdXRbXSA9ICR0aGVtZS0+YW5u
b3VuY2UoCgkJCQlnVHh0KCdzaG93aW5nX3NlYXJjaF9yZXN1bHRzJywKCQkJCQlhcnJheSgK
CQkJCQkJJ3tmcm9tfScgID0+ICgoJHBhZ2UgLSAxKSAqICRsaW1pdCkgKyAxLAoJCQkJCQkn
e3RvfScgICAgPT4gbWluKCR0b3RhbCwgJHBhZ2UgKiAkbGltaXQpLAoJCQkJCQkne3RvdGFs
fScgPT4gJHRvdGFsCgkJCQkJCSkKCQkJCQkpCgkJCQkpOwoJCX0KCgkJaWYgKCRudW1QYWdl
cyA+IDEpCgkJewoJCQkkb3B0aW9uX2xpc3QgPSBhcnJheSgpOwoKCQkJZm9yICgkaSA9IDE7
ICRpIDw9ICRudW1QYWdlczsgJGkrKykKCQkJewoJCQkJaWYgKCRpID09ICRwYWdlKQoJCQkJ
ewoJCQkJCSRvcHRpb25fbGlzdFtdID0gJzxvcHRpb24gdmFsdWU9IicuJGkuJyIgc2VsZWN0
ZWQ9InNlbGVjdGVkIj4nLiIkaS8kbnVtUGFnZXMiLic8L29wdGlvbj4nOwoJCQkJfQoKCQkJ
CWVsc2UKCQkJCXsKCQkJCQkkb3B0aW9uX2xpc3RbXSA9ICc8b3B0aW9uIHZhbHVlPSInLiRp
LiciPicuIiRpLyRudW1QYWdlcyIuJzwvb3B0aW9uPic7CgkJCQl9CgkJCX0KCgkJCSRuYXYg
PSBhcnJheSgpOwoKCQkJJG5hdltdID0gKCRwYWdlID4gMSkgPwoJCQkJUHJldk5leHRMaW5r
KCRldmVudCwgJHBhZ2UgLSAxLCBnVHh0KCdwcmV2JyksICdwcmV2JywgJHNvcnQsICRkaXIs
ICRjcml0LCAkc2VhcmNoX21ldGhvZCwgJHN0ZXApLnNwIDoKCQkJCXRhZyhnVHh0KCdwcmV2
JyksICdzcGFuJywgJyBjbGFzcz0ibmF2bGluay1kaXNhYmxlZCInKS5zcDsKCgkJCSRuYXZb
XSA9ICc8c2VsZWN0IG5hbWU9InBhZ2UiIG9uY2hhbmdlPSJzdWJtaXQodGhpcy5mb3JtKTsi
Pic7CgkJCSRuYXZbXSA9IG4uam9pbihuLCAkb3B0aW9uX2xpc3QpOwoJCQkkbmF2W10gPSBu
Lic8L3NlbGVjdD4nOwoKCQkJJG5hdltdID0gKCRwYWdlICE9ICRudW1QYWdlcykgPwoJCQkJ
c3AuUHJldk5leHRMaW5rKCRldmVudCwgJHBhZ2UgKyAxLCBnVHh0KCduZXh0JyksICduZXh0
JywgJHNvcnQsICRkaXIsICRjcml0LCAkc2VhcmNoX21ldGhvZCwgJHN0ZXApIDoKCQkJCXNw
LnRhZyhnVHh0KCduZXh0JyksICdzcGFuJywgJyBjbGFzcz0ibmF2bGluay1kaXNhYmxlZCIn
KTsKCgkJCSRvdXRbXSA9ICc8Zm9ybSBjbGFzcz0ibmF2LWZvcm0iIG1ldGhvZD0iZ2V0IiBh
Y3Rpb249ImluZGV4LnBocCI+Jy4KCQkJCW4uZUlucHV0KCRldmVudCkuCgkJCQluLmhJbnB1
dCgnYm0nLCAkYm0pLgoJCQkJbi5zSW5wdXQoJHN0ZXApLgoJCQkJKCAkc29ydCA/IG4uaElu
cHV0KCdzb3J0JywgJHNvcnQpLm4uaElucHV0KCdkaXInLCAkZGlyKSA6ICcnICkuCgkJCQko
ICgkY3JpdCAhPSAnJykgPyBuLmhJbnB1dCgnY3JpdCcsICRjcml0KS5uLmhJbnB1dCgnc2Vh
cmNoX21ldGhvZCcsICRzZWFyY2hfbWV0aG9kKSA6ICcnICkuCgkJCQknPHAgY2xhc3M9InBy
ZXYtbmV4dCI+Jy4KCQkJCWpvaW4oJycsICRuYXYpLgoJCQkJJzwvcD4nLgoJCQkJbi50SW5w
dXQoKS4KCQkJCW4uJzwvZm9ybT4nOwoJCX0KCQllbHNlCgkJewoJCQkkb3V0W10gPSBncmFm
KCRwYWdlLicvJy4kbnVtUGFnZXMsICcgY2xhc3M9InByZXYtbmV4dCInKTsKCQl9CgoJCXJl
dHVybiBqb2luKG4sICRvdXQpOwoJfSI7czozOiJtZDUiO3M6MzI6ImNkYjUzZWM0YzkwNTc4
NjliMWI1NDA5NjdlZGFhYTZlIjt9
